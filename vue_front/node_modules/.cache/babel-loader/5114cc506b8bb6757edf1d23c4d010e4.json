{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ossan/git-clone/quiz_project/vue_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/ossan/git-clone/quiz_project/vue_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { mapGetters, mapActions } from 'vuex';\nimport LogDetail from '@/components/dashboard/LogDetail.vue';\nimport axios from 'axios';\nexport default {\n  components: {\n    LogDetail: LogDetail\n  },\n  data: function data() {\n    return {\n      errorMessage: \"components/dashboard/Logger\",\n      loggers: \"\",\n      logDetail: false,\n      currentTagIndex: '',\n      nextUrl: '',\n      loading: false,\n      noMoreUrl: false,\n      urlForPatch: '/api/enquire-patch?logList='\n    };\n  },\n  mounted: function mounted() {\n    this.getLogger();\n    console.log('moubted', this.$refs.child);\n  },\n  computed: {\n    user: function user() {\n      return this.$store.state.signup.djangoUser;\n    },\n    myQuiz: function myQuiz() {\n      return this.$store.state.signup.djangoUser.my_quiz[0];\n    },\n    fieldNameId: function fieldNameId() {\n      return this.$store.getters.fieldNameId;\n    },\n    quizNameId: function quizNameId() {\n      return this.$store.getters.quizNameId;\n    },\n    statusNameId: function statusNameId() {\n      this.$store.dispatch(\"getStatusNameId\");\n      return this.$store.getters.statusNameId;\n    }\n  },\n  methods: {\n    getLogger: function getLogger() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.$store.commit('setIsLoading', true);\n\n                _context.next = 3;\n                return axios.get('/api/enquire-list').then(function (response) {\n                  _this.loggers = response.data;\n\n                  if (response.data.next) {\n                    _this.nextUrl = response.data.next;\n                  } else {\n                    _this.noMoreUrl = true;\n                  }\n\n                  console.log('getlog', _this.loggers);\n                }).catch(function (e) {\n                  var logger = {\n                    message: _this.errorMessage + 'getLogger',\n                    path: window.location.pathname,\n                    actualErrorName: e.name,\n                    actualErrorMessage: e.message\n                  };\n\n                  _this.$store.commit('setLogger', logger);\n\n                  _this.$store.commit(\"checkDjangoError\", e.message);\n\n                  _this.$store.commit('setIsLoading', false);\n\n                  router.push({\n                    name: 'ConnectionError'\n                  });\n                });\n\n              case 3:\n                _this.$store.commit('setIsLoading', false);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    getNextLogger: function getNextLogger() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                console.log('next');\n                _this2.loading = true;\n                _context2.next = 4;\n                return axios.get(_this2.nextUrl).then(function (response) {\n                  console.log(response.data.results);\n                  response.data.results.forEach(function (e) {\n                    _this2.loggers.results.push(e);\n                  });\n                  console.log('refs', _this2.$refs.child); // this.$refs.child.ckeckedTrue()\n\n                  console.log('n', response.data.next);\n                  _this2.nextUrl = response.data.next;\n                }).catch(function (e) {\n                  var logger = {\n                    message: _this2.errorMessage + 'getLogger',\n                    path: window.location.pathname,\n                    actualErrorName: e.name,\n                    actualErrorMessage: e.message\n                  };\n\n                  _this2.$store.commit('setLogger', logger);\n\n                  _this2.$store.commit(\"checkDjangoError\", e.message);\n\n                  _this2.$store.commit('setIsLoading', false);\n\n                  router.push({\n                    name: 'ConnectionError'\n                  });\n                });\n\n              case 4:\n                _this2.loading = false;\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    ckeckedToString: function ckeckedToString(checked) {\n      if (checked) {\n        return '';\n      } else {\n        return '未確認';\n      }\n    },\n    logDetailFalse: function logDetailFalse() {\n      this.logDetail = false;\n    },\n    logDetailTrue: function logDetailTrue(index) {\n      this.currentTagIndex = index;\n      this.logDetail = true;\n    },\n    getNextUrlFromChild: function getNextUrlFromChild(url) {\n      console.log('gotURL', url);\n      this.nextUrl = url;\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["mapGetters","mapActions","LogDetail","axios","components","data","errorMessage","loggers","logDetail","currentTagIndex","nextUrl","loading","noMoreUrl","urlForPatch","mounted","getLogger","console","log","$refs","child","computed","user","$store","state","signup","djangoUser","myQuiz","my_quiz","fieldNameId","getters","quizNameId","statusNameId","dispatch","methods","commit","get","then","response","next","catch","logger","message","path","window","location","pathname","actualErrorName","e","name","actualErrorMessage","router","push","getNextLogger","results","forEach","ckeckedToString","checked","logDetailFalse","logDetailTrue","index","getNextUrlFromChild","url"],"sourceRoot":"","sources":["/Users/ossan/git-clone/quiz_project/vue_front/src/components/dashboard/Enquire.vue"],"sourcesContent":["<template>\n    <div class=\"logger-wrapper\" :class=\"{'laoding-center':$store.state.isLoading}\">\n        <div  :class=\"{'notification-blue':$store.state.board.notifications.reply}\">\n            <div class=\"notification-text\">\n                \n            </div>\n        </div>\n        <div class=\"main-wrapper\">\n            <div class=\"main-container\" >\n                <div class=\"logger-header\">\n                    \n                </div>\n                <!-- {{ loggers }} -->\n                <div class=\"logger-container\" v-if=\"$store.state.isLoading==false\">\n                    <div class=\"no-my-quiz\" v-if=\"!loggers.results\">\n                        <div class=\"no-quiz\">\n                            問い合わせはありません。<br>\n                        </div>\n                    </div>\n                    <div class=logger-loop @click=\"logDetailTrue(logindex)\" v-for=\"(log,logindex) in loggers.results\"\n                        v-bind:key=\"logindex\">\n                        <div class=\"each-log-container\">\n                            <div class=\"question-index-container\">\n                                <div class=\"question-index\">{{ logindex+1 }}</div>\n                            </div>\n                            <!-- <div class=\"log-time\">{{ log.created_on }}</div> -->\n                            <div class=\"log-time\">{{ log.created_on }}</div>\n                            <div class=\"log-message\">{{ log.enquire_content.substr(0,15)+'...'  }}</div>\n                            <div v-if=\"!log.checked\" class=\"log-checked\" >{{ ckeckedToString(log.checked) }}</div>\n                        </div>\n                    </div>\n                    <div class=\"is-loading-bar has-text-centered\" v-bind:class=\"{'is-loading': loading }\">\n                        <div class=\"lds-dual-ring\"></div>\n                    </div>\n                    <i v-if=\"this.nextUrl\" @click=\"getNextLogger()\" class=\"fas fa-angle-down\"></i>\n                    <LogDetail\n                    v-if=\"logDetail\"\n                    :loggers=\"loggers\"\n                    :currentTagIndex=\"currentTagIndex\"\n                    :nextUrl=\"nextUrl\"\n                    :noMoreUrl=\"noMoreUrl\"\n                    :urlForPatch=\"urlForPatch\"\n                    @getNextUrlFromChild=\"getNextUrlFromChild\"\n                    @logDetailFalse=\"logDetailFalse\"\n                    @getNextLogger=\"getNextLogger\"             \n                    />\n                </div>\n                <!-- <div @click=\"handleQuizOpen()\" v-if=\"showButtonAndNoQuiz\" class=\"btn-basegra-white-db-sq\">\n                    練習\n                </div> -->\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {mapGetters,mapActions} from 'vuex'\nimport LogDetail from '@/components/dashboard/LogDetail.vue'\nimport axios from 'axios';\n\nexport default {\n    components: {\n        LogDetail,\n    },\n    data(){\n        return{\n            errorMessage:\"components/dashboard/Logger\",\n            loggers: \"\",\n            logDetail: false,\n            currentTagIndex:'',\n            nextUrl: '',\n            loading: false,\n            noMoreUrl: false,\n            urlForPatch: '/api/enquire-patch?logList='\n        }\n    },\n    mounted(){\n        this.getLogger()\n        console.log('moubted',this.$refs.child)\n    },\n    computed:{\n        user(){\n            return this.$store.state.signup.djangoUser\n        },\n        myQuiz(){\n            return this.$store.state.signup.djangoUser.my_quiz[0]\n        },\n        fieldNameId(){\n            return this.$store.getters.fieldNameId\n        },\n        quizNameId(){\n            return this.$store.getters.quizNameId\n        },\n        statusNameId(){\n            this.$store.dispatch(\"getStatusNameId\")\n            return this.$store.getters.statusNameId\n        }\n\n    },\n    methods:{\n        async getLogger(){\n            this.$store.commit('setIsLoading', true)\n            await axios\n                .get('/api/enquire-list')\n                .then(response => {\n                    this.loggers = response.data\n                    if(response.data.next){\n                        this.nextUrl = response.data.next\n                    } else {\n                        this.noMoreUrl = true\n                    }\n                    console.log('getlog', this.loggers)\n                    })\n                .catch(e => {\n                    let logger = {\n                    message: this.errorMessage + 'getLogger',\n                    path: window.location.pathname,\n                    actualErrorName: e.name,\n                    actualErrorMessage: e.message,\n                }\n                this.$store.commit('setLogger',logger)\n                this.$store.commit(\"checkDjangoError\",e.message)\n                this.$store.commit('setIsLoading', false)\n                router.push({ name: 'ConnectionError' })\n                })\n            this.$store.commit('setIsLoading', false)\n        },\n        async getNextLogger() {\n            console.log('next')\n            this.loading = true\n            await axios\n                .get(this.nextUrl)\n                .then(response => {\n                    console.log(response.data.results)\n                    response.data.results.forEach(e => {\n                        this.loggers.results.push(e)\n                    })\n                    console.log('refs',this.$refs.child)\n                    // this.$refs.child.ckeckedTrue()\n                    console.log('n',response.data.next)\n                    this.nextUrl = response.data.next\n                    })\n                .catch(e => {\n                    let logger = {\n                    message: this.errorMessage + 'getLogger',\n                    path: window.location.pathname,\n                    actualErrorName: e.name,\n                    actualErrorMessage: e.message,\n                }\n                this.$store.commit('setLogger',logger)\n                this.$store.commit(\"checkDjangoError\",e.message)\n                this.$store.commit('setIsLoading', false)\n                router.push({ name: 'ConnectionError' })\n                })\n            this.loading = false\n\n        },\n        ckeckedToString(checked) {\n            if(checked){\n                return ''\n            } else {\n                return '未確認'\n            }\n        },\n        logDetailFalse() {\n            this.logDetail = false\n        },\n        logDetailTrue(index) {\n            this.currentTagIndex = index\n            this.logDetail = true\n        },\n        getNextUrlFromChild(url){\n            console.log('gotURL',url)\n            this.nextUrl = url\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n@import \"style/_variables.scss\";\n\n.main-container{\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        }\n\n.logger-wrapper{\n    display: flex;\n    justify-content: center;\n    .main-wrapper{\n        .logger-header{\n            margin-bottom: 1rem;\n            .register{\n                font-size: 1.3rem;\n                color: $lite-gray;\n                font-weight: bold;\n            }\n            .max{\n                font-size: 0.8rem;\n                color: $lite-gray;\n            }\n        }\n        .logger-container{\n            width: 95%;\n            min-height: 300px;\n            max-height: 350px;\n            border: solid $base-color;\n            border-radius: 5px;\n            background: $back-white;\n            padding-top: 1rem;\n            padding-bottom: 1rem;\n            overflow: scroll;\n            .no-my-quiz{\n                margin:2rem;\n                .no-quiz{\n                    color: $dark-blue;\n                    font-weight: bold;\n                    margin-bottom: 2rem;\n                }\n            \n            }\n            .logger-loop:hover{\n                background: $back-lite-white;\n                border-bottom: solid $lite-gray;\n            }\n            .logger-loop{\n                position: relative;\n                display: flex;\n                align-items: center;\n                border-bottom: solid $lite-gray;\n                transition: .5s;\n                .each-log-container{\n                    position: relative;\n                    display: flex;\n                    width: 100%;\n                    margin-bottom: 1rem;\n                    margin-top: 1rem;\n                    // padding-bottom: 0.5rem;\n                    align-items: center;\n                    // justify-content: center;\n                    .question-index-container{\n                        flex-basis: 10%;\n                        display: flex;\n                        justify-content: center;\n                        align-items: center;\n                        .question-index{\n                            border: solid $base-color;\n                            border-radius: 50vh;\n                            width: 1.7rem;\n                            height: 1.7rem;\n                            margin-left: 0.4rem;\n                            font-weight: bold;\n                            background: $dark-blue;\n                            color: white;\n                        }\n                    }\n                    .log-time{\n                        flex-basis: 30%;\n\n                    }\n                    .log-message{\n                        flex-basis: 50%;\n                    }\n                    .log-checked{\n                        position: absolute;\n                        flex-basis: 10%;\n                        right: 0;\n                        color: red;\n                        margin-right: 0.5rem;\n                        border: solid $dull-red;\n                    }\n                }\n            }\n            .fa-angle-down{\n                margin-top: 1rem;\n            }\n        }\n        .btn-basegra-white-db-sq{\n            margin-top: 0.5rem;\n            margin-bottom: 0.5rem;\n            padding-top: 0.2rem;\n            padding-bottom: 0.2rem;\n            padding-left: 1.2rem;\n            padding-right: 1.2rem;\n            font-weight: bold;\n            font-size: 1.2rem;\n\n        }\n\n    }\n\n}\n</style>"]},"metadata":{},"sourceType":"module"}