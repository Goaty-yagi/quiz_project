{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ossan/git-clone/quiz_project/vue_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/ossan/git-clone/quiz_project/vue_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _createForOfIteratorHelper from \"/Users/ossan/git-clone/quiz_project/vue_front/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport axios from 'axios';\nimport { router } from \"../main.js\";\nimport CreateQuestion from '@/components/board/CreateQuestion.vue';\nimport Confirm from '@/components/board/Confirm.vue';\nimport Search from '@/components/board/Search.vue';\nexport default {\n  components: {\n    CreateQuestion: CreateQuestion,\n    Confirm: Confirm,\n    Search: Search\n  },\n  data: function data() {\n    return {\n      questions: '',\n      temporaryQuestion: '',\n      search: '',\n      wordList: [],\n      parentTagDict: {},\n      showCreateQuestion: false,\n      showConfirm: false,\n      scrollFixed: false,\n      scroll_position: '100',\n      userTagList: [],\n      // reccomendedQuestion: [],\n      searchedQuestion: '',\n      onAnswerOrReply: false,\n      scrollY: 0,\n      scrollHeight: '',\n      scrollBottom: false,\n      bottomScrollActionHandler: true,\n      // notifications:false,\n      next: '',\n      showQuestionStatus: {\n        recent: true,\n        reccomend: false,\n        search: false\n      },\n      styles: {\n        position: '',\n        top: ''\n      }\n    };\n  },\n  created: function created() {\n    console.log('created');\n    this.$store.dispatch('getDjangoUser');\n    this.$store.dispatch('getAnsweredQuestion');\n  },\n  beforeMount: function beforeMount() {\n    // this.getQuestion()\n    console.log('before-mounted');\n  },\n  mounted: function mounted() {\n    window.addEventListener('scroll', this.handleScroll);\n    window.addEventListener('scroll', this.getScrollY);\n    this.bottomScrollActionHandler = true;\n    this.scrollBottom = false, this.scrollTop();\n    this.handleOnAnswerOrReply();\n    this.$store.dispatch('getRelatedQuestion');\n    this.getQuestion();\n    console.log('mounted', this.reccomendedQuestion);\n  },\n  beforeUnmount: function beforeUnmount() {\n    console.log(\"BD\");\n    window.removeEventListener('scroll', this.handleScroll);\n    window.removeEventListener('scroll', this.getScrollY);\n    console.log(\"removed\");\n  },\n  // unmounted(){\n  //     console.log(\"DSTROY\")\n  //     window.removeEventListener('scroll', this.handleScroll)\n  //     window.removeEventListener('scroll', this.getScrollY)\n  // },\n  // watch:{\n  //     scrollY:function(v) {this.scrollY = window.scrollY }\n  //     },\n  computed: {\n    user: function user() {\n      return this.$store.state.signup.djangoUser;\n    },\n    notification: function notification() {\n      return;\n    },\n    reccomendedQuestion: function reccomendedQuestion() {\n      return this.$store.getters.gettersReccomendedQuestion;\n    },\n    handleOnReplyAndOnAnswer: function handleOnReplyAndOnAnswer() {\n      // this is for community_page to display if user have notifications\n      var _iterator = _createForOfIteratorHelper(this.user.question),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var question2 = _step.value;\n\n          if (question2.on_answer == true && question2.user.UID == this.user.UID) {\n            console.log(\"onAnswer_dayo\");\n            return true;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      console.log(\"answercheck start\", this.$store.getters.gettersAnsweredQuestions);\n      var answeredQuestion = this.$store.getters.gettersAnsweredQuestions.results;\n\n      var _iterator2 = _createForOfIteratorHelper(answeredQuestion),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var question = _step2.value;\n          console.log(question);\n\n          var _iterator3 = _createForOfIteratorHelper(question.answer),\n              _step3;\n\n          try {\n            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n              var answer = _step3.value;\n              console.log(answer.id);\n\n              if (answer.on_reply == true && answer.user.UID == this.user.UID) {\n                console.log(\"onreply_dayo\");\n                return true;\n              }\n            }\n          } catch (err) {\n            _iterator3.e(err);\n          } finally {\n            _iterator3.f();\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return false; // Object.keys(answeredQuestion).forEach(key =>{\n      //     console.log(key)\n      //     for(let answer of answeredQuestion[key].answer){\n      //         if(answer.on_reply==true){\n      //             return true\n      //         }\n      //     }\n      //     // this.showQuestion.questionStatus[key] = false\n      // })\n      // for(let question of getters.gettersAnsweredQuestions){\n      //     console.log(question)\n      //     for(let answer of question.answer){\n      //         console.log(answer.id)\n      //         if(answer.on_reply==true&&answer.user.UID==getters.user.UID){\n      //             return  true\n      //         }\n      //     for(let question2 of getters.user.question){\n      //             if(question2.on_answer==true&&question2.user.UID==getters.user.UID){\n      //                 return true\n      //             }else{\n      //                 return false\n      //             }\n      //         }\n      //     }\n      // }\n    },\n    // getUserTags(){\n    //     let checkDict = {}  \n    //     // let checkedDict = {}\n    //     let checkedList = []\n    //     let checkedlist2 = []\n    //     for(let i of this.user.user_tag){\n    //         checkDict[i.tag] = i.total_num\n    //         checkedList.push(i.tag)\n    //     }\n    //     console.log(\"computed\",checkDict)\n    //     if(Object.keys(checkDict).length <= 3){\n    //         return checkedList\n    //     }\n    //     if(Object.keys(checkDict).length > 3){\n    //         for(let m=0; m < 3; m++){\n    //             const aryMax = function (a, b) {return Math.max(a, b);}\n    //             let max = Object.values(checkDict).reduce(aryMax);\n    //             const result = Object.keys(checkDict).reduce( (r, key) => { \n    //                 return checkDict[key] === max ? key : r \n    //                 }, null);\n    //             // checkedDict[result] = max\n    //             delete checkDict[result]\n    //             checkedlist2.push(result)\n    //         }\n    //         return checkedlist2\n    //     }\n    // },\n    handleQuestions: function handleQuestions() {\n      console.log(\"in handlequestion\");\n\n      if (this.showQuestionStatus.recent) {\n        console.log(\"return_recen:\", this.temporaryQuestion);\n        this.questions = this.temporaryQuestion;\n        console.log(\"Q_resilts\", this.questions.results);\n        return this.questions.results;\n      } else if (this.showQuestionStatus.reccomend) {\n        console.log(\"return_reco:\", this.reccomendedQuestion);\n        this.questions = this.reccomendedQuestion;\n        return this.questions.results;\n      } else if (this.showQuestionStatus.search) {\n        console.log(\"return_search:\");\n        this.questions = this.searchedQuestion;\n        return this.questions.results;\n      }\n    }\n  },\n  methods: {\n    getQuestion: function getQuestion() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.$store.commit('setIsLoading', true);\n\n                _context.next = 3;\n                return axios.get('/api/board/question/list').then(function (response) {\n                  _this.temporaryQuestion = response.data; // this.next = response.data.next\n                  // document.title = this.product.name + ' | Djackets'\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 3:\n                _this.$store.commit('setIsLoading', false);\n\n                _this.getParentTag();\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    getAdditionalQuestion: function getAdditionalQuestion(next) {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                console.log(\"addQ\", next);\n\n                if (!(next != null)) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                _context2.next = 4;\n                return axios.get(next).then(function (response) {\n                  var _iterator4 = _createForOfIteratorHelper(response.data.results),\n                      _step4;\n\n                  try {\n                    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                      var i = _step4.value;\n\n                      _this2.questions.results.push(i);\n                    }\n                  } catch (err) {\n                    _iterator4.e(err);\n                  } finally {\n                    _iterator4.f();\n                  }\n\n                  _this2.questions.next = response.data.next;\n                  _this2.bottomScrollActionHandler = true;\n\n                  if (_this2.questions.next == null) {\n                    _this2.bottomScrollActionHandler = false;\n                    _this2.scrollBottom = false; // window.removeEventListener('scroll', this.handleScroll)\n                    // window.removeEventListener('scroll', this.getScrollY)\n                  }\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    getParentTag: function getParentTag() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                console.log('in_get_parentTag');\n                _context3.next = 3;\n                return axios.get('/api/board/parent-tag').then(function (response) {\n                  var parentTags = response.data;\n                  console.log('parentTags', parentTags);\n\n                  _this3.getParentTagDict(parentTags);\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    handleOnAnswerOrReply: function handleOnAnswerOrReply() {\n      if (this.$store.getters.handleOnAnswer || this.$store.getters.handleOnReply) {\n        this.onAnswerOrReply = true;\n      }\n    },\n    // async getRelatedQuestion() {\n    //     // this.$store.commit('setIsLoading', true)\n    //     console.log(\"ingetRQ\",this.getUserTags)\n    //     if(this.getUserTags.length == 1){\n    //         var url = `/api/board/question/filter-list?tag=${this.getUserTags[0]}`\n    //     }\n    //     if(this.getUserTags.length == 2){\n    //         var url = `/api/board/question/filter-list?tag=${this.getUserTags[0]}&tag=${this.getUserTags[1]}`\n    //     }\n    //     if(this.getUserTags.length == 3){\n    //         var url = `/api/board/question/filter-list?tag=${this.getUserTags[0]}&tag=${this.getUserTags[1]}&tag=${this.getUserTags[2]}`\n    //     }\n    //     console.log(\"url:\",url)\n    //     try{\n    //         await axios.get(url)\n    //             .then(response => {\n    //             this.reccomendedQuestion = response.data\n    //             console.log(this.reccomendedQuestion.length,this.reccomendedQuestion)\n    //             })\n    //         }\n    //     catch{(error => {\n    //             console.log(error)\n    //     })}\n    //     // this.$store.commit('setIsLoading', false)\n    // },\n    getSearchQuestion: function getSearchQuestion() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this4.$store.commit('setIsLoading', true);\n\n                console.log('Gsearch');\n                _context4.next = 4;\n                return axios.get(\"/api/board/question/search/?keyword=\".concat(_this4.wordList)).then(function (response) {\n                  _this4.searchedQuestion = response.data;\n                  console.log(\"SQ\", _this4.searchedQuestion);\n\n                  _this4.questionHandler(\"search\");\n\n                  console.log(\"status changed to :\", _this4.showQuestionStatus.search);\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 4:\n                _this4.$store.commit('setIsLoading', false);\n\n              case 5:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))();\n    },\n    splitSearch: function splitSearch() {\n      var _this5 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var letterList, _iterator5, _step5, i;\n\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (!_this5.search) {\n                  _context5.next = 12;\n                  break;\n                }\n\n                _this5.wordList = [];\n                letterList = [];\n                _this5.search = _this5.search.trim();\n                _this5.search = _this5.search.split('');\n                _iterator5 = _createForOfIteratorHelper(_this5.search);\n\n                try {\n                  for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n                    i = _step5.value;\n                    console.log(i === ' ');\n\n                    if (i === ' ' && letterList[0] || i === '　' && letterList[0]) {\n                      _this5.wordList.push(letterList.join(''));\n\n                      letterList = [];\n                    } else if (i === ' ' || i === '　') {\n                      ;\n                    } else {\n                      letterList.push(i);\n                    }\n                  }\n                } catch (err) {\n                  _iterator5.e(err);\n                } finally {\n                  _iterator5.f();\n                }\n\n                _this5.wordList.push(letterList.join(''));\n\n                letterList = [];\n                _this5.search = '';\n                _context5.next = 12;\n                return _this5.getSearchQuestion();\n\n              case 12:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }))();\n    },\n    getParentTagDict: function getParentTagDict(parentTags) {\n      var _iterator6 = _createForOfIteratorHelper(parentTags),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var i = _step6.value;\n          this.parentTagDict[i.parent_tag] = i.center_tag;\n          console.log(\"PD\", parentTags, this.parentTagDict);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    },\n    handleShowCreateQuestion: function handleShowCreateQuestion() {\n      console.log('showCreate');\n      this.showCreateQuestion = !this.showCreateQuestion;\n      this.handleScrollFixed();\n      this.a();\n    },\n    handleShowConfirm: function handleShowConfirm() {\n      this.showConfirm = !this.showConfirm;\n      console.log('confurm', this.showConfirm);\n    },\n    remove_T_Z: function remove_T_Z(datatime) {\n      var time = datatime.replace(/T|Z/g, ' ');\n      return time;\n    },\n    getDetail: function getDetail(slug) {\n      console.log('slugdayo', slug); // this.$store.commit('getSlug',slug)\n\n      router.push(\"/board-detail/\".concat(slug));\n    },\n    // nextHandlar(next){\n    //     return next\n    // },\n    questionHandler: function questionHandler(key) {\n      // recieve \"recent\" or \"reccomend\" to change status\n      this.bottomScrollActionHandler = true;\n\n      for (var _i = 0, _Object$keys = Object.keys(this.showQuestionStatus); _i < _Object$keys.length; _i++) {\n        var i = _Object$keys[_i];\n\n        if (i == key) {\n          this.showQuestionStatus[i] = true;\n        } else {\n          this.showQuestionStatus[i] = false;\n        }\n      } // this.showQuestionStatus[key] = true\n\n    },\n    handleScrollFixed: function handleScrollFixed() {\n      this.scrollFixed = !this.scrollFixed;\n    },\n    handleShowQuestionStatusSearch: function handleShowQuestionStatusSearch() {\n      showQuestionStatus.search = false;\n    },\n    goHome: function goHome() {\n      router.push(\"/\");\n      this.$store.commit('reset');\n    },\n    goAccount: function goAccount() {\n      router.push(\"/board/account\");\n    },\n    scrollTop: function scrollTop() {\n      window.scrollTo({\n        top: 0\n      });\n    },\n    getScrollY: function getScrollY() {\n      this.scrollY = window.scrollY;\n    },\n    handleScroll: function handleScroll() {\n      console.log(\"inSCROLL\");\n      var doch = document.querySelector('.scroll_area').scrollHeight;\n      var winh = window.innerHeight; //ウィンドウの高さ\n\n      var bottom = doch - winh; //ページ全体の高さ - ウィンドウの高さ = ページの最下部位置\n\n      console.log(\"inSCROLL2\", \"doch\", doch, \"winh\", winh, 'bottom', bottom, 'scTOP', this.scrollY, this.bottomScrollActionHandler);\n\n      if (bottom + 100 <= this.scrollY && this.bottomScrollActionHandler) {\n        this.bottomScrollActionHandler = false;\n        this.scrollBottom = true;\n        console.log(\"shitadayo\", this.scrollBottom, this.questions.next);\n        this.getAdditionalQuestion(this.questions.next); // this.scrollBottom = false\n        // this.next==null\n\n        if (this.next == null) {\n          this.scrollBottom = false;\n        }\n      }\n    },\n    // dammySetTime(){\n    //     this.scrollBottom = false\n    // },\n    // resetNotifications(){\n    //     this.notifications = false\n    // },\n    // handleNotifications(){\n    //         this.notifications = true\n    //         setTimeout(this.resetNotifications, 3000)    \n    // },\n    a: function a() {\n      this.scroll_position = window.pageYOffset;\n      this.styles.top = this.scroll_position;\n      console.log(this.scroll_position); // const elem = document.getElementById('scroll');\n      // elem.style.top = scroll_position\n      // console.log('scroll', scroll_position)\n      // window.scrollTo({\n      //     top: scroll_position,\n      //     behavior: \"smooth\"\n      //     });\n      //     console.log(\"unko\")\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","router","CreateQuestion","Confirm","Search","components","data","questions","temporaryQuestion","search","wordList","parentTagDict","showCreateQuestion","showConfirm","scrollFixed","scroll_position","userTagList","searchedQuestion","onAnswerOrReply","scrollY","scrollHeight","scrollBottom","bottomScrollActionHandler","next","showQuestionStatus","recent","reccomend","styles","position","top","created","console","log","$store","dispatch","beforeMount","mounted","window","addEventListener","handleScroll","getScrollY","scrollTop","handleOnAnswerOrReply","getQuestion","reccomendedQuestion","beforeUnmount","removeEventListener","computed","user","state","signup","djangoUser","notification","getters","gettersReccomendedQuestion","handleOnReplyAndOnAnswer","question","question2","on_answer","UID","gettersAnsweredQuestions","answeredQuestion","results","answer","id","on_reply","handleQuestions","methods","commit","get","then","response","catch","error","getParentTag","getAdditionalQuestion","i","push","parentTags","getParentTagDict","handleOnAnswer","handleOnReply","getSearchQuestion","questionHandler","splitSearch","letterList","trim","split","join","parent_tag","center_tag","handleShowCreateQuestion","handleScrollFixed","a","handleShowConfirm","remove_T_Z","datatime","time","replace","getDetail","slug","key","Object","keys","handleShowQuestionStatusSearch","goHome","goAccount","scrollTo","doch","document","querySelector","winh","innerHeight","bottom","pageYOffset"],"sourceRoot":"","sources":["/Users/ossan/git-clone/quiz_project/vue_front/src/views/Community.vue"],"sourcesContent":["<template>\n<!-- this scroll fixed should be change -->\n    <div class=\"community-wrapper scroll_area\" :class=\"{'scrll-fixed':showCreateQuestion, 'laoding-center':$store.state.isLoading}\">\n        <div class=\"main-wrapper\">\n            <div class=\"is-loading-bar has-text-centered\" v-bind:class=\"{'is-loading': $store.state.isLoading }\">\n                <!-- <i class=\"fas fa-cog\"></i> -->\n                <div class=\"lds-dual-ring\"></div>\n            </div>\n            <div class=\"community-container\" v-if=\"$store.state.isLoading==false\">\n                <div class=\"header-flex\">\n                    <h1 class='title-white'>質問板</h1>\n                    <i @click=\"goAccount()\" class=\"fas fa-user user-font\"></i>\n                    <i v-if=\"handleOnReplyAndOnAnswer\" class=\"fas fa-exclamation\"></i>\n                    <!-- <i @click=\"goAccount()\" class=\"fas fa-address-book user-font\"></i> -->\n                </div>\n                <!-- <div v-if=\"notifications\" :class=\"{'notification-blue':notifications}\">\n                        <div class=\"notification-text\">\n                            投稿しました。\n                        </div>\n                    </div> -->\n                <form class='search-wrapper' @submit.prevent='splitSearch()'>\n                    <i class=\"fas fa-search\"><input class='search' v-model='search' type=\"text\"></i>\n                </form>\n            \n                \n                <div class=\"question-box\" v-if='showQuestionStatus.search==false' >\n                    <p class='word'>わからない事があったら質問してみよう。</p>\n                    <button class='btn-base-white-db-sq' \n                    @click='handleShowCreateQuestion'>質問する</button>\n                </div>\n                <!-- <button @click=\"handleNotifications\">unko</button> -->\n\n                <div class=select-wrapper v-if='showQuestionStatus.search==false'>\n                    <button\n                    @click=\"questionHandler('recent')\"\n                    :class=\"{'btn-tr-white-base-cir':showQuestionStatus.recent==false,'btn-tr-black-baselite-cir':showQuestionStatus.recent}\"\n                    >最近の投稿</button>\n                    <button\n                    @click=\"questionHandler('reccomend')\"\n                    :class=\"{'btn-tr-white-base-cir':showQuestionStatus.reccomend==false,'btn-tr-black-baselite-cir':showQuestionStatus.reccomend}\">おすすめの<wbr>投稿</button>\n                </div>\n                <div class=\"question-wrapper\">\n                    <CreateQuestion\n                        v-if='showCreateQuestion'\n                        :parentTagDict=\"parentTagDict\"\n                        @handleShowConfirm='handleShowConfirm'\n                        @handleShowCreateQuestion='handleShowCreateQuestion'/>\n                    <Confirm\n                        v-if='showConfirm'\n                        @handleShowConfirm='handleShowConfirm'\n                        @getDetail='getDetail'\n                        @handleNotifications='handleNotifications'\n                    />\n\n                    <!-- here is for searched questions -->\n                    <div v-if='showQuestionStatus.search'>\n                        <div class=\"search-title title-blue\">検索結果</div>\n                        <div class=\"no-found\" v-if=\"questions.results==false\">\n                            <p>お探しの質問は見つかりませんでした。</p>\n                            <div class=\"route\">\n                                <div @click=\"goHome()\"><i class=\"fas fa-home\" ></i><p>ホームへ戻る</p></div>\n                                <div @click=\"handleShowQuestionStatusSearch()\"><i class=\"far fa-comments\"></i><p>質問板へ戻る</p></div>\n                            </div>\n                        </div>\n                        <div\n                        v-for=\"(question,questionindex) in questions.results\"\n                        v-bind:key=\"questionindex\">\n                            <div class='question-list' @click=\"getDetail(question.slug)\">\n                                <div \n                                    class=\"tag-wrapper\">\n                                    <div \n                                        class=\"tag\"\n                                        v-for=\"(tag,tagindex) in question.tag\" \n                                        v-bind:key=\"tagindex\">{{ tag.tag }}</div>\n                                </div>\n                                <div class=\"question-title\">{{ question.title }}</div>\n                                <div class=\"question-description\">{{ question.description.substr(0,10)+'...' }}</div>\n                                <div class='good-like-wrapper'>\n                                    <i class=\"far fa-heart\"></i>\n                                    <div class=\"good\" v-if=\"question.liked_num[0]\">{{ question.liked_num[0].liked_num }}</div>\n                                    <div class=\"date\">作成日：{{ question.created_on }}</div>\n                                </div>\n                            </div>        \n                        </div>\n                    </div\n                    >\n                    <!-- here for general questions -->\n                    <div\n                    v-for=\"(question,questionindex) in handleQuestions\"\n                    v-bind:key=\"questionindex\"\n                    >\n                        <div class='question-list' v-if='showQuestionStatus.search==false' @click=\"getDetail(question.slug)\">\n                            <div \n                            class=\"tag-wrapper\">\n                                <div \n                                class=\"tag\"\n                                v-for=\"(tag,tagindex) in question.tag\" \n                                v-bind:key=\"tagindex\">{{ tag.tag }}</div>\n                            </div>\n                            <div class=\"question-title\">{{ question.title }}</div>\n                            <div class=\"question-description\">{{ question.description.substr(0,10)+'...' }}</div>\n                            <div class='good-like-wrapper'>\n                                <i class=\"far fa-heart\"></i>\n                                <div class=\"good\" v-if=\"question.liked_num[0]\">{{ question.liked_num[0].liked_num }}</div>\n                                <div class=\"date\">作成日：{{ remove_T_Z(question.created_on) }}</div>\n                            </div>\n                        </div>        \n                    </div>\n                    <div v-if=\"scrollBottom&&questions.next\" class=\"question-list-dammy shine\">\n                        <div class=\"tag-wrapper-dammy\">\n                            <div class=\"tag-dammy\"></div>\n                        </div>\n                        <div class=\"question-title-dammy\"></div>\n                        <div class=\"questiondescroption-dammy\"></div>\n                        <div class=\"footer-dammy\"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport {router} from \"../main.js\"\nimport  CreateQuestion from '@/components/board/CreateQuestion.vue'\nimport  Confirm from '@/components/board/Confirm.vue'\nimport  Search from '@/components/board/Search.vue'\nexport default {\n    components: {\n        CreateQuestion,\n        Confirm,\n        Search\n  },\n    data(){\n        return{\n            questions:'',\n            temporaryQuestion:'',\n            search:'',\n            wordList: [],\n            parentTagDict:{},       \n            showCreateQuestion: false,\n            showConfirm: false,\n            scrollFixed: false,\n            scroll_position: '100',\n            userTagList: [],\n            // reccomendedQuestion: [],\n            searchedQuestion:'',\n            onAnswerOrReply:false,\n            scrollY: 0,\n            scrollHeight:'',\n            scrollBottom: false, \n            bottomScrollActionHandler:true,\n            // notifications:false,\n            next: '',\n            showQuestionStatus:{\n                recent: true,\n                reccomend: false,\n                search: false\n            },\n            styles:{\n                position:'',\n                top:'',\n            }\n        }\n    },\n    created(){\n        console.log('created')\n        this.$store.dispatch('getDjangoUser')\n        this.$store.dispatch('getAnsweredQuestion')\n    },\n    beforeMount(){\n        // this.getQuestion()\n        console.log('before-mounted')\n    },\n    mounted() {\n        window.addEventListener('scroll', this.handleScroll)\n        window.addEventListener('scroll', this.getScrollY)\n        this.bottomScrollActionHandler = true\n        this.scrollBottom = false, \n        this.scrollTop()\n        this.handleOnAnswerOrReply()\n        this.$store.dispatch('getRelatedQuestion')\n        this.getQuestion()\n        console.log('mounted',this.reccomendedQuestion)\n    },\n    beforeUnmount(){\n        console.log(\"BD\")\n        window.removeEventListener('scroll', this.handleScroll)\n        window.removeEventListener('scroll', this.getScrollY)\n        console.log(\"removed\")\n    },\n    // unmounted(){\n    //     console.log(\"DSTROY\")\n    //     window.removeEventListener('scroll', this.handleScroll)\n    //     window.removeEventListener('scroll', this.getScrollY)\n    // },\n    // watch:{\n    //     scrollY:function(v) {this.scrollY = window.scrollY }\n    //     },\n    computed:{\n        user(){\n            return this.$store.state.signup.djangoUser\n        },\n        notification(){\n            return \n        },\n        reccomendedQuestion(){\n            return this.$store.getters.gettersReccomendedQuestion\n        },\n        handleOnReplyAndOnAnswer(){\n            // this is for community_page to display if user have notifications\n            for(let question2 of this.user.question){\n                if(question2.on_answer==true&&question2.user.UID==this.user.UID){\n                    console.log(\"onAnswer_dayo\")\n                    return true\n                }\n            }\n            console.log(\"answercheck start\", this.$store.getters.gettersAnsweredQuestions)\n            let answeredQuestion = this.$store.getters.gettersAnsweredQuestions.results\n            for(let question of answeredQuestion){\n                console.log(question)\n                for(let answer of question.answer){\n                    console.log(answer.id)\n                    if(answer.on_reply==true&&answer.user.UID==this.user.UID){\n                        console.log(\"onreply_dayo\")\n                        return  true\n                    }\n                }\n            }return false\n            // Object.keys(answeredQuestion).forEach(key =>{\n            //     console.log(key)\n            //     for(let answer of answeredQuestion[key].answer){\n            //         if(answer.on_reply==true){\n            //             return true\n            //         }\n            //     }\n            //     // this.showQuestion.questionStatus[key] = false\n            // })\n            // for(let question of getters.gettersAnsweredQuestions){\n            //     console.log(question)\n            //     for(let answer of question.answer){\n            //         console.log(answer.id)\n            //         if(answer.on_reply==true&&answer.user.UID==getters.user.UID){\n            //             return  true\n            //         }\n            //     for(let question2 of getters.user.question){\n            //             if(question2.on_answer==true&&question2.user.UID==getters.user.UID){\n            //                 return true\n            //             }else{\n            //                 return false\n            //             }\n            //         }\n            //     }\n                \n            // }\n        },\n        // getUserTags(){\n        //     let checkDict = {}  \n        //     // let checkedDict = {}\n        //     let checkedList = []\n        //     let checkedlist2 = []\n        //     for(let i of this.user.user_tag){\n        //         checkDict[i.tag] = i.total_num\n        //         checkedList.push(i.tag)\n        //     }\n        //     console.log(\"computed\",checkDict)\n        //     if(Object.keys(checkDict).length <= 3){\n        //         return checkedList\n        //     }\n        //     if(Object.keys(checkDict).length > 3){\n        //         for(let m=0; m < 3; m++){\n        //             const aryMax = function (a, b) {return Math.max(a, b);}\n        //             let max = Object.values(checkDict).reduce(aryMax);\n        //             const result = Object.keys(checkDict).reduce( (r, key) => { \n        //                 return checkDict[key] === max ? key : r \n        //                 }, null);\n        //             // checkedDict[result] = max\n        //             delete checkDict[result]\n        //             checkedlist2.push(result)\n        //         }\n        //         return checkedlist2\n        //     }\n        // },\n        handleQuestions(){\n            console.log(\"in handlequestion\")\n            if(this.showQuestionStatus.recent){\n                console.log(\"return_recen:\",this.temporaryQuestion)\n                this.questions = this.temporaryQuestion\n                console.log(\"Q_resilts\",this.questions.results)\n                return this.questions.results\n            }\n            else if(this.showQuestionStatus.reccomend){\n                console.log(\"return_reco:\",this.reccomendedQuestion)\n                this.questions = this.reccomendedQuestion\n                return this.questions.results\n            }\n            else if(this.showQuestionStatus.search){\n                console.log(\"return_search:\")\n                this.questions = this.searchedQuestion\n                return this.questions.results\n            }\n        }\n    },\n    methods: {\n        async getQuestion() {\n            this.$store.commit('setIsLoading', true)\n            await axios\n                .get('/api/board/question/list')\n                .then(response => {\n                    this.temporaryQuestion = response.data\n                    // this.next = response.data.next\n                    // document.title = this.product.name + ' | Djackets'\n                })\n                .catch(error => {\n                    console.log(error)\n                })\n            this.$store.commit('setIsLoading', false)\n            this.getParentTag()\n        },\n        async getAdditionalQuestion(next){\n            console.log(\"addQ\",next)\n            if(next!=null){\n                await axios\n                .get(next)\n                .then(response => {\n                    for(let i of response.data.results){\n                        this.questions.results.push(i)\n                    }\n                    this.questions.next= response.data.next\n                    this.bottomScrollActionHandler = true\n                    if(this.questions.next==null){\n                        this.bottomScrollActionHandler = false\n                        this.scrollBottom = false\n                        // window.removeEventListener('scroll', this.handleScroll)\n                        // window.removeEventListener('scroll', this.getScrollY)\n                    }\n                })\n                .catch(error => {\n                    console.log(error)\n                })\n            }\n        },\n        async getParentTag(){\n            console.log('in_get_parentTag')\n            await axios\n                .get('/api/board/parent-tag')\n                .then(response => {\n                    let parentTags = response.data\n                    console.log('parentTags',parentTags)\n                    this.getParentTagDict(parentTags)\n                })\n                .catch(error => {\n                    console.log(error)\n                })\n        },\n        handleOnAnswerOrReply(){\n            if(this.$store.getters.handleOnAnswer||this.$store.getters.handleOnReply){\n                this.onAnswerOrReply = true\n            }\n        },\n        // async getRelatedQuestion() {\n        //     // this.$store.commit('setIsLoading', true)\n        //     console.log(\"ingetRQ\",this.getUserTags)\n        //     if(this.getUserTags.length == 1){\n        //         var url = `/api/board/question/filter-list?tag=${this.getUserTags[0]}`\n        //     }\n        //     if(this.getUserTags.length == 2){\n        //         var url = `/api/board/question/filter-list?tag=${this.getUserTags[0]}&tag=${this.getUserTags[1]}`\n        //     }\n        //     if(this.getUserTags.length == 3){\n        //         var url = `/api/board/question/filter-list?tag=${this.getUserTags[0]}&tag=${this.getUserTags[1]}&tag=${this.getUserTags[2]}`\n        //     }\n        //     console.log(\"url:\",url)\n        //     try{\n        //         await axios.get(url)\n        //             .then(response => {\n        //             this.reccomendedQuestion = response.data\n        //             console.log(this.reccomendedQuestion.length,this.reccomendedQuestion)\n        //             })\n        //         }\n        //     catch{(error => {\n        //             console.log(error)\n        //     })}\n        //     // this.$store.commit('setIsLoading', false)\n        // },\n        async getSearchQuestion(){\n            this.$store.commit('setIsLoading', true)\n            console.log('Gsearch')\n            await axios\n                .get(`/api/board/question/search/?keyword=${this.wordList}`)\n                .then(response => {\n                    this.searchedQuestion = response.data\n                    console.log(\"SQ\", this.searchedQuestion)\n                    this.questionHandler(\"search\")\n                    console.log(\"status changed to :\",this.showQuestionStatus.search)\n                })\n                .catch(error => {\n                    console.log(error)\n                })\n            this.$store.commit('setIsLoading', false)\n        },          \n        async splitSearch(){\n            if(this.search){\n                this.wordList = []\n                let letterList = []\n                this.search = this.search.trim()\n                this.search = this.search.split('')\n                for(let i of this.search){\n                    console.log(i === ' ')\n                    if(i === ' '&&letterList[0] || i === '　'&&letterList[0]){\n                        this.wordList.push(letterList.join(''))\n                        letterList = []\n                    }\n                    else if(i === ' ' || i === '　'){\n                        ;\n                    }             \n                    else{\n                        letterList.push(i)\n                    }\n                }\n                this.wordList.push(letterList.join(''))\n                letterList = []\n                this.search = ''\n                await this.getSearchQuestion()\n            }\n        },\n        getParentTagDict(parentTags){\n            for (let i of parentTags){\n                this.parentTagDict[i.parent_tag] = i.center_tag\n                console.log(\"PD\",parentTags,this.parentTagDict)\n            }\n        },\n        handleShowCreateQuestion(){\n            console.log('showCreate')\n            this.showCreateQuestion = !this.showCreateQuestion\n            this.handleScrollFixed()\n            this.a()\n        },\n        handleShowConfirm(){\n            this.showConfirm = !this.showConfirm\n            console.log('confurm',this.showConfirm)\n        },\n        remove_T_Z(datatime){\n            const time = datatime.replace(/T|Z/g,' ')\n            return time\n        },\n        getDetail(slug){\n            console.log('slugdayo',slug)\n            // this.$store.commit('getSlug',slug)\n            router.push(`/board-detail/${slug}` )\n        },\n        // nextHandlar(next){\n        //     return next\n        // },\n        questionHandler(key){\n            // recieve \"recent\" or \"reccomend\" to change status\n            this.bottomScrollActionHandler = true\n            for(let i of Object.keys(this.showQuestionStatus)){\n                if(i == key){\n                    this.showQuestionStatus[i] = true                    \n                }else{\n                    this.showQuestionStatus[i] = false\n                }\n            }\n            // this.showQuestionStatus[key] = true\n        },\n        handleScrollFixed(){\n            this.scrollFixed = !this.scrollFixed\n        },\n        handleShowQuestionStatusSearch(){\n            showQuestionStatus.search = false\n        },\n        goHome(){\n            router.push(\"/\")\n            this.$store.commit('reset')\n        },\n        goAccount(){\n            router.push(\"/board/account\")\n        },\n        scrollTop(){\n            window.scrollTo({\n                top: 0,\n            });\n        },\n        getScrollY(){\n            this.scrollY = window.scrollY\n        },\n        handleScroll(){\n            console.log(\"inSCROLL\")\n            var doch = document.querySelector('.scroll_area').scrollHeight\n            var winh = window.innerHeight; //ウィンドウの高さ\n            var bottom = doch - winh; //ページ全体の高さ - ウィンドウの高さ = ページの最下部位置\n            console.log(\"inSCROLL2\",\"doch\",doch,\"winh\",winh,'bottom',bottom,'scTOP',this.scrollY,this.bottomScrollActionHandler)\n            if (bottom+100 <= this.scrollY&&this.bottomScrollActionHandler) {\n                this.bottomScrollActionHandler = false\n                this.scrollBottom = true\n                console.log(\"shitadayo\",this.scrollBottom,this.questions.next)\n                this.getAdditionalQuestion(this.questions.next)\n                // this.scrollBottom = false\n                // this.next==null\n                if(this.next==null){\n                    this.scrollBottom = false\n                }\n            }\n        },\n        // dammySetTime(){\n        //     this.scrollBottom = false\n        // },\n        // resetNotifications(){\n        //     this.notifications = false\n            \n        // },\n        // handleNotifications(){\n        //         this.notifications = true\n        //         setTimeout(this.resetNotifications, 3000)    \n        // },\n        a(){\n            this.scroll_position = window.pageYOffset;\n            this.styles.top = this.scroll_position\n            console.log(this.scroll_position,)\n        \n        // const elem = document.getElementById('scroll');\n        // elem.style.top = scroll_position\n        // console.log('scroll', scroll_position)\n        // window.scrollTo({\n        //     top: scroll_position,\n        //     behavior: \"smooth\"\n        //     });\n        //     console.log(\"unko\")\n        }\n    }\n}\n</script>\n\n<style lang='scss' scoped>\n@import \"style/_variables.scss\";\n.scroll{\n    position:fixed;\n}\n.community-wrapper{\n    // background: linear-gradient(#5B759F,#1C254C);\n    display: flex;\n    flex-direction: column;\n    // justify-content: center;\n    height: auto;\n    min-height: 80vh;\n    width: 100vw;\n    align-items: center;\n    .main-wrapper{\n        .community-container{\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            .header-flex{\n                display: flex;\n                justify-content: center;\n                position:relative;\n                width:100%;\n                .user-font{\n                    position:absolute;\n                    right:0;\n                    margin-right: 1rem;\n                    margin-top: 1rem;\n                    font-size: 2rem;\n                    color: $dark-blue\n                }\n                .fa-exclamation{\n                    position:absolute;\n                    right:0;\n                    margin-right: 0.6rem;\n                    margin-top: 0.5rem;\n                    font-size: 0.2rem;\n                    border: solid red;\n                    border-radius: 50vh;\n                    // padding: 0.3rem;\n                    padding-top: 0.1rem;\n                    padding-bottom: 0.1rem;\n                    padding-left: 0.3rem;\n                    padding-right: 0.3rem;\n                    color: red;\n                    background: $back-white;\n                }\n            }\n            .search-wrapper{\n                border: solid $base-color;\n                border-radius: 50vh;\n                width: 70%;\n                height: 2.5rem;\n                background: $back-white;\n                display: flex;\n                align-items: center;       \n                .fa-search{\n                    width:100%;\n                    margin-left: 1rem;\n                    padding-right: 1rem;\n                    transition: 0.5s;\n                    color: rgb(165, 165, 165);\n                    .search{\n                    border: none;\n                    padding-left: 0.5rem;\n                    background: $back-white;\n                    width: 90%;\n                    }\n                }\n                .fa-search:focus-within{\n                    color:rgb(80, 80, 80);\n                }\n            }\n            .question-box{\n                border: solid $base-color;\n                border-radius: 0.5rem;\n                width: 90%;\n                height: 10rem;\n                background: rgb(252, 252, 252);\n                margin: 1rem;\n                .word{\n                    margin: 1rem;\n                    font-size: 1.5rem;\n                }\n                .btn-base-white-db-sq{\n                    padding-top: 0.5rem;\n                    padding-bottom: 0.5rem;\n                    padding-left: 1rem;\n                    padding-right: 1rem;\n                    font-size: 1rem;\n                    font-weight: bold;\n                }\n            }\n            .select-wrapper{\n                .btn-tr-black-baselite-cir{\n                    padding-top: 0.5rem;\n                    padding-bottom: 0.5rem;\n                    font-size: 0.8rem;\n                    margin-right: 0.1rem;\n                }\n                .btn-tr-white-base-cir{\n                    padding-top: 0.5rem;\n                    padding-bottom: 0.5rem;\n                    font-size: 0.8rem;\n                    margin-left: 0.1rem;\n                }\n            }\n            .question-wrapper{\n                margin: 1rem;\n                width: 85%;\n                .search-title{\n                    margin-top: 2rem;\n                }\n                .no-found{\n                    p{\n                        margin-top:0.5rem;\n                    }\n                    .route{\n                        display:flex;\n                        align-items: center;\n                        justify-content: center;\n                        padding: 1rem;\n                        color: gray;\n                        div{\n                            margin:1rem;\n                        }\n                        div:hover{\n                            color:rgb(221, 221, 221);\n                            transition:0.3s;\n                        }\n                    }\n                }\n                .question-list{\n                    border: solid $base-color;\n                    margin-bottom: 0.5rem;\n                    width:100%;\n                    background: rgb(252, 252, 252);\n                    display: flex;\n                    flex-direction: column;\n                    .tag-wrapper{\n                        display: flex;\n                        width: 100%;\n                        .tag{\n                            border: solid black;\n                            border-radius: 50vh;\n                            background: rgb(230, 230, 230);\n                            margin-top: 0.5rem;\n                            margin-left: 0.3rem;\n                            margin-bottom: 0.5rem;\n                            padding: 0.5rem;\n                            min-width: 3rem;\n                        }\n                    }\n                    .good-like-wrapper{\n                        display: flex;\n                        .fa-heart{\n                            color: rgb(221, 36, 221);\n                            margin-left: 0.5rem;\n                            margin-right: 0.3rem;\n                            margin-top: 0.2rem;\n                        }\n                        .date{\n                            margin-left: 0.5rem;\n                        }\n                    }\n                }\n                .question-list-dammy{\n                    background: gray;\n                    display: flex;\n                    width: 100%;\n                    flex-direction: column;\n                    justify-content: center;\n                    align-items: center;\n                    .tag-wrapper-dammy{\n                        display: flex;\n                        width: 100%;\n                        .tag-dammy{\n                            border-radius: 50vh;\n                            background: rgb(92, 92, 92);\n                            margin-top: 0.5rem;\n                            margin-left: 0.3rem;\n                            margin-bottom: 0.5rem;\n                            padding: 0.5rem;\n                            min-width: 3rem;\n                            min-height: 1.5rem;\n                        }\n                    }\n                    .question-title-dammy{\n                        background: rgb(92, 92, 92);\n                        padding: 0.5rem;\n                        width: 80%;\n                    }\n                    .questiondescroption-dammy{\n                        background: rgb(92, 92, 92);\n                        padding: 0.5rem;\n                        width: 80%;\n                        margin-top: 0.5rem;\n                    }\n                    .footer-dammy{\n                        background: rgb(92, 92, 92);\n                        padding: 0.5rem;\n                        width: 80%;\n                        margin-top: 0.5rem;\n                        margin-bottom: 1rem;\n                    }\n                }\n            }\n        }\n    }\n}\n</style>"]},"metadata":{},"sourceType":"module"}