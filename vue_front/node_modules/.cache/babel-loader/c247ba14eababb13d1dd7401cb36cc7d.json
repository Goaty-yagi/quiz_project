{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '@/assets/logo.png';\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1e8ae1b6\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"notification-wrapper\"\n};\nconst _hoisted_2 = {\n  class: \"notice-wrapper\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"image\",\n  src: _imports_0\n}, null, -1));\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"text1\"\n}, \"以下の情報で登録しますか。\", -1));\n\nconst _hoisted_5 = {\n  class: \"field\"\n};\nconst _hoisted_6 = {\n  class: \"input-box\"\n};\n\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-robot\",\n  id: \"in-font\"\n})], -1));\n\nconst _hoisted_8 = {\n  class: \"text-box\"\n};\nconst _hoisted_9 = {\n  class: \"field\"\n};\nconst _hoisted_10 = {\n  class: \"input-box\"\n};\n\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"far fa-envelope\",\n  id: \"in-font\"\n})], -1));\n\nconst _hoisted_12 = {\n  class: \"text-box\",\n  id: \"mail\"\n};\nconst _hoisted_13 = {\n  class: \"field\"\n};\nconst _hoisted_14 = {\n  class: \"input-box\"\n};\n\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-globe\",\n  id: \"in-font\"\n})], -1));\n\nconst _hoisted_16 = {\n  class: \"text-box\"\n};\nconst _hoisted_17 = {\n  class: \"field\"\n};\nconst _hoisted_18 = {\n  class: \"input-box\"\n};\n\nconst _hoisted_19 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-unlock-alt\",\n  id: \"in-font\"\n}, null, -1));\n\nconst _hoisted_20 = {\n  class: \"text-box\"\n};\nconst _hoisted_21 = {\n  class: \"buttons\"\n};\nconst _hoisted_22 = [\"disabled\"];\n\nconst _hoisted_23 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"編集する\", -1));\n\nconst _hoisted_24 = [_hoisted_23];\nconst _hoisted_25 = [\"disabled\"];\n\nconst _hoisted_26 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"登録\", -1));\n\nconst _hoisted_27 = [_hoisted_26];\nconst _hoisted_28 = {\n  key: 0,\n  class: \"error\"\n};\nconst _hoisted_29 = {\n  key: 0,\n  class: \"error-message\"\n};\n\nconst _hoisted_30 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"fbottun\",\n  id: \"color-button\"\n}, \"戻る\", -1));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _hoisted_4, _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _createElementVNode(\"div\", _hoisted_8, _toDisplayString(_ctx.$store.state.signup.username), 1)])]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_hoisted_11, _createElementVNode(\"div\", _hoisted_12, _toDisplayString(_ctx.$store.state.signup.email), 1)])]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"div\", _hoisted_14, [_hoisted_15, _createElementVNode(\"div\", _hoisted_16, _toDisplayString($props.viewableCountry), 1)])]), _createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"div\", _hoisted_18, [_hoisted_19, _createElementVNode(\"div\", _hoisted_20, _toDisplayString(_ctx.$store.state.signup.password), 1)])]), _createElementVNode(\"div\", _hoisted_21, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.goEdit && $options.goEdit(...args)),\n    class: \"button\",\n    disabled: $data.error,\n    id: \"color-button\"\n  }, _hoisted_24, 8, _hoisted_22), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.addStep && $options.addStep(...args)),\n    class: \"button\",\n    disabled: $data.error,\n    id: \"color-button\"\n  }, _hoisted_27, 8, _hoisted_25)]), _createVNode(_Transition, {\n    name: \"notice\"\n  }, {\n    default: _withCtx(() => [$data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, [$data.error ? (_openBlock(), _createElementBlock(\"p\", _hoisted_29, _toDisplayString($data.error), 1)) : _createCommentVNode(\"\", true), _hoisted_30])) : _createCommentVNode(\"\", true)]),\n    _: 1\n  })])]);\n}","map":{"version":3,"mappings":"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","names":["_imports_0","class","_createElementVNode","src","id","_hoisted_23","_hoisted_26","_createElementBlock","_hoisted_3","_hoisted_4","_hoisted_7","_toDisplayString","_ctx","state","signup","username","_hoisted_11","email","_hoisted_15","$props","_hoisted_19","password","onClick","$options","disabled","$data","_createVNode","_Transition","name","_hoisted_30"],"sourceRoot":"","sources":["/Users/ossan/git-clone/quiz_project/vue_front/src/components/signin/RegisterConfirm.vue"],"sourcesContent":["<template>\n    <div class='notification-wrapper'>\n        <div class='notice-wrapper'>\n            <img class='image' src=\"@/assets/logo.png\">\n            <p class='text1'>以下の情報で登録しますか。</p>\n            <div class=\"field\">\n                <div class=\"input-box\">\n                    <div><i class=\"fas fa-robot\" id='in-font'></i></div>\n                    <div class=\"text-box\">{{ $store.state.signup.username }}</div>\n                </div>         \n            </div>\n            <div class=\"field\">\n                <div class=\"input-box\">\n                    <div><i class=\"far fa-envelope\" id='in-font'></i></div>      \n                        <div class=\"text-box\" id='mail'>{{ $store.state.signup.email }}</div>\n                </div>         \n            </div>\n            <div class=\"field\">\n                <div class=\"input-box\">\n                    <div><i class=\"fas fa-globe\" id='in-font'></i></div>\n                    <div class=\"text-box\">{{ viewableCountry }}</div>\n                </div>         \n            </div>\n            <div class=\"field\">\n                <div class=\"input-box\">\n                    <i class=\"fas fa-unlock-alt\" id='in-font'></i>\n                    <div class=\"text-box\">{{ $store.state.signup.password }}</div>\n                </div>         \n            </div>\n            <div class=\"buttons\">\n                <button  @click='goEdit' class='button' :disabled='error' id='color-button'><p>編集する</p></button>\n                <button  @click='addStep' class='button' :disabled='error' id='color-button'><p>登録</p></button>\n            </div>\n            <transition name=\"notice\">\n                <div v-if='error' class=\"error\">\n                    <p class='error-message' v-if='error'> {{ error }} </p>\n                    <button class='fbottun' id='color-button'>戻る</button>\n                </div>\n            </transition>\n        </div>\n    </div>\n</template>\n\n<script>\nimport ID from './ID.vue'\nimport axios from 'axios'\nexport default {\n  components: { ID },\n  props:[\n        'viewableCountry',\n    ],\n    data(){\n        return{\n            error: null,\n            errorMessage:'このメールアドレスはすでに使われています。',\n            errorMessage2:'登録できませんでした。もう一度お試しください。',\n            userInfo:'',\n            gotIP:false,\n            IPInfo:[\n                {city:\"\",\n                ip:\"\",\n                loc:\"\",\n                org:\"\",\n                postal:\"\",\n                region:\"\",\n                timezone:\"\",\n                country:\"\"\n                }\n            ],\n        }\n    },\n    mounted(){\n        this.$store.commit('fixedScrollTrue')\n        this.getCountry()\n        console.log('mail',this.$store.state.signup.email, 'password',this.$store.state.signup.password)\n        console.log('mounted at confiem',this.$store.getters.fixedScroll)\n\n    },\n    beforeUnmount(){\n        this.$store.commit('fixedScrollFalse')\n    },\n    computed:{\n        user(){\n            try{\n                return this.$store.state.signup.djangoUser\n            }\n            catch{\n                return null\n            }\n        },\n    },\n    methods:{\n        async addStep(){\n            await this.$store.dispatch('signup',{\n            email: this.$store.state.signup.email,\n            password: this.$store.state.signup.password\n            })\n            this.$emit('confHandle')\n            this.$emit('sentHandle')\n            this.$store.commit('addStep')\n            this.$emit('handle')\n            await this.registerUserAndDjango()\n        },\n        async registerUserAndDjango(){\n            if(this.$store.getters.getTempUser.test){\n                console.log('YES TEMP')\n                this.userInfo={\n                    UID: this.$store.state.signup.user.uid,\n                    name: this.$store.state.signup.username,\n                    email: this.$store.state.signup.email,\n                    country: this.$store.state.signup.country,\n                    quiz_taker: [\n                        {grade: this.$store.getters.getTempUser.grade},\n                        {level: this.$store.getters.getTempUser.level},\n                        {user_status: this.$store.getters.getTempUser.statusList}\n                    ],\n                    ip_data: [{\n                        city: this.IPInfo.city,\n                        ip: this.IPInfo.ip,\n                        loc: this.IPInfo.loc,\n                        org: this.IPInfo.org,\n                        postal: this.IPInfo.postal,\n                        region: this.IPInfo.region,\n                        timezone: this.IPInfo.timezone,\n                        country: this.IPInfo.country\n                    }]\n                }\n            }else{\n                console.log('NO TEMP')\n                this.userInfo={\n                    UID: this.$store.state.signup.user.uid,\n                    name: this.$store.state.signup.username,\n                    email: this.$store.state.signup.email,\n                    country: this.$store.state.signup.country,\n                    ip_data: [{\n                        city: this.IPInfo.city,\n                        ip: this.IPInfo.ip,\n                        loc: this.IPInfo.loc,\n                        org: this.IPInfo.org,\n                        postal: this.IPInfo.postal,\n                        region: this.IPInfo.region,\n                        timezone: this.IPInfo.timezone,\n                        country: this.IPInfo.country\n                    }]\n                }\n            }\n            try{\n                console.log(\"try\",this.userInfo)\n                this.$store.dispatch('signupDjangoUser',this.userInfo)\n                // await axios({\n                //     method: 'post',\n                //     url: '/api/user/',\n                //     data: this.userInfo\n                    // {\n                    //     UID: this.$store.state.signup.user.uid,\n                    //     name: this.$store.state.signup.username,\n                    //     email: this.$store.state.signup.email,\n                    //     quiz_taker: [\n                    //         {grade: this.$store.getters.getTempUser.grade},\n                    //         {level: this.$store.getters.getTempUser.level}\n                    //     ],\n                        // ip_data: [{\n                        //    city: this.IPInfo.city,\n                        //    ip: this.IPInfo.ip,\n                        //    loc: this.IPInfo.loc,\n                        //    org: this.IPInfo.org,\n                        //    postal: this.IPInfo.postal,\n                        //    region: this.IPInfo.region,\n                        //    timezone: this.IPInfo.timezone,\n                        //    country: this.IPInfo.country\n                        // }]\n                    // },\n                // })\n            }\n            catch(error){\n                console.log('error',error.message)\n                }\n            \n        },\n        async goEdit(){\n            this.$emit('showPasswordFalse')\n            this.$emit('handle')\n            this.$emit('edithandle')\n        },\n        async getCountry(){\n            if(!this.gotIP){\n                await axios\n                .get(\"https://ipinfo.io/json?token=32e16159d962c5\")\n                // .then(response => {\n                //     this.IPInfo = response.data\n                //     console.log(this.IPInfo)\n                //     })\n                .then(response => {\n                    let IP = response.data\n                    this.IPInfo.city = IP.city\n                    this.IPInfo.ip = IP.ip\n                    this.IPInfo.loc = IP.loc\n                    this.IPInfo.org = IP.org\n                    this.IPInfo.postal = IP.postal\n                    this.IPInfo.region = IP.region\n                    this.IPInfo.timezone = IP.timezone\n                    this.IPInfo.country = IP.country\n                    console.log(this.IPInfo)\n                    })\n                .catch(error => {\n                    console.log(error)\n                })\n                this.gotIP = true\n            }\n        }    \n    },\n}\n</script>\n\n<style scoped lang='scss'>\n@import \"style/_variables.scss\";\n    .notification-wrapper{\n        top:0;\n        position: fixed;\n        background:rgba(0,0,0,0.5);\n        width:100vw;\n        height:100vh;\n        flex-direction: column;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n    .notice-wrapper{\n        border: solid $base-color;\n        border-radius: 2vh;\n        background:$back-white;\n        text-align: center;       \n        position:relative;\n        padding-top:1.5rem;\n        height:30rem;\n        width: 20rem;\n    }\n    .image{\n        width:15%;\n        height:auto;\n        margin-left: auto;\n        margin-right: auto;\n    }\n    .text1{\n        font-size:1rem;\n        font-weight: bold;\n        margin:2rem;\n    }\n    .input-box{\n        border: solid $base-color;\n        border-radius: 100Vh;\n        // display: flex;\n        // justify-content: flex-start;\n        // align-items: center;\n        margin-left: 1rem;\n        margin-right: 1rem;\n        height: 3rem;\n        position:relative;\n        font-size:1.5rem;\n    }\n    #in-font{\n        // font-size:1rem;\n        margin-left: 1rem;\n        position:absolute;\n        left:0;\n        top:0.6rem;\n    }\n    .text-box{\n        // position: absolute;\n        left:0;\n        right:0;\n        top:0;\n        bottom: 0;\n        font-size:1.2rem;\n        font-weight: bold;\n        margin-top:0.5rem;\n        margin-left:3rem;\n        margin-right:2rem;\n    }\n    #mail{\n        overflow-wrap: break-word;\n        line-height: 0.9rem;\n        margin-top:0.8rem;        \n    }\n    .buttons{\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n    }\n    .button{\n        font-weight: bold;\n    }\n    .error{\n        position:absolute;\n        border:solid red;\n        background: rgb(247, 230, 232);\n        border-radius: 1rem;\n        height:70%;\n        left:0;\n        right:0;\n        bottom:0;\n        top:0;\n        margin:auto;\n        transition: 0.3s;\n        padding:2rem;\n        display:flex;\n        justify-content: center;\n        align-items: center;\n        flex-direction: column;\n    }\n    .error-message{\n        font-weight: bold;\n    }\n</style>"]},"metadata":{},"sourceType":"module"}