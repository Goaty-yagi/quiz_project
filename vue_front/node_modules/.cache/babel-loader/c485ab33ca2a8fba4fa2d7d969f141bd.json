{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ossan/git-clone/quiz_project/vue_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/ossan/git-clone/quiz_project/vue_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport axios from 'axios';\nimport { router } from \"/src/main.js\";\nexport default {\n  data: function data() {\n    return {\n      description: '',\n      alert: false,\n      showType: false,\n      enquireType: ['利用規約', '個人情報の取り扱い', 'クイズ', 'コミュニティ', '要望', '仕事のお問い合わせ', 'その他'],\n      form: {\n        name: '',\n        mail: '',\n        type: '',\n        text: ''\n      },\n      errorArray: [],\n      formError: {\n        occurred: false,\n        name: '名前を入力してください。',\n        mail: 'メールアドレスを入力してください。',\n        wrongMail: '正しいアドレスを入力してください。',\n        type: '問い合わせタイプを入力してください。',\n        text: '問い合わせ内容を入力してください。',\n        lessText: '20字以上入力してください。'\n      }\n    };\n  },\n  methods: {\n    createEnquire: function createEnquire() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var logger;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return axios({\n                  method: 'post',\n                  url: '/api/enquire/',\n                  data: {\n                    'user_name': _this.form.name,\n                    'email': _this.form.mail,\n                    'enquire_type': _this.form.type,\n                    'enquire_content': _this.form.text\n                  }\n                });\n\n              case 3:\n                _context.next = 12;\n                break;\n\n              case 5:\n                _context.prev = 5;\n                _context.t0 = _context[\"catch\"](0);\n                console.log('response', _context.t0.response.status);\n                logger = {\n                  message: _this.errorMessage + \" enquire\" + \"couldn't create enquire\",\n                  path: window.location.pathname,\n                  actualErrorName: _context.t0.name,\n                  actualErrorMessage: _context.t0.message\n                };\n\n                _this.$store.commit('setLogger', logger);\n\n                _this.$store.commit('setIsLoading', false);\n\n                router.push({\n                  name: 'ConnectionError'\n                });\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 5]]);\n      }))();\n    },\n    showTypeHandle: function showTypeHandle() {\n      console.log('clicked');\n      this.showType = !this.showType;\n    },\n    getSelectType: function getSelectType(val) {\n      this.form.type = val;\n    },\n    submit: function submit() {\n      this.errorArray = [];\n\n      for (var _i = 0, _Object$keys = Object.keys(this.form); _i < _Object$keys.length; _i++) {\n        var i = _Object$keys[_i];\n        console.log(i);\n\n        if (i == 'text') {\n          if (this.form[i].length < 20) {\n            this.errorArray.push(this.formError[\"lessText\"]); // this.formError.occurred = true\n            // this.setTime()\n          }\n        } else if (i == 'mail') {\n          if (!this.validEmail(this.form[i])) {\n            this.errorArray.push(this.formError[\"wrongMail\"]); // this.formError.occurred = true\n            // this.setTime()\n            // break\n          }\n        } else if (!this.form[i]) {\n          this.errorArray.push(this.formError[i]); // this.formError.occurred = true\n          // this.setTime()\n          // break\n        } else {\n          this.formError.occurred = false;\n        }\n      }\n\n      if (!this.formError.occurred) {\n        this.createEnquire();\n        console.log('created');\n      } else {\n        this.formError.occurred = true;\n        this.setTime();\n      }\n    },\n    validEmail: function validEmail(email) {\n      var re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      return re.test(email);\n    },\n    formErrorFalse: function formErrorFalse() {\n      this.formError.occurred = false;\n    },\n    setTime: function setTime() {\n      setTimeout(this.formErrorFalse, 3000);\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","router","data","description","alert","showType","enquireType","form","name","mail","type","text","errorArray","formError","occurred","wrongMail","lessText","methods","createEnquire","method","url","console","log","response","status","logger","message","errorMessage","path","window","location","pathname","actualErrorName","actualErrorMessage","$store","commit","push","showTypeHandle","getSelectType","val","submit","Object","keys","i","length","validEmail","setTime","email","re","test","formErrorFalse","setTimeout"],"sourceRoot":"","sources":["/Users/ossan/git-clone/quiz_project/vue_front/src/views/footer-contents/Enquire.vue"],"sourcesContent":["<template>\n    <div class=\"enquire-wrapper\">\n        <div class=\"main-wrapper\">\n            <div class=\"content-wrapper\">\n                <div class=\"title-white\">\n                    <p>問い合わせ</p>\n                </div>\n                <div class=\"enquire-container\">\n                    <div class=\"enquire-title\">名前</div>\n                    <input class=\"enquire-input\" type=\"text\" v-model='form.name'>\n                </div>\n                <div class=\"enquire-container\">\n                    <div class=\"enquire-title\">メールアドレス</div>\n                    <input class=\"enquire-input\" type=\"text\" v-model='form.mail'>\n                </div>\n                <div class=\"enquire-container\">\n                    <div class=\"enquire-title\">問い合わせタイプ</div>\n                    <div class=\"enquire-type\"\n                    @click=\"showTypeHandle()\">\n                        <i\n                        v-if=\"!form.type\"\n                        class=\"fas fa-angle-down\"\n                        :class=\"{'lotate':showType}\">\n                        </i>\n                        <div v-if=\"form.type\">{{ form.type }}</div>\n                        <div v-if=\"showType\" class=\"type-select\">\n                            <div class=\"select-loop\"\n                            v-for=\"(type,typeindex) in enquireType\" \n                                v-bind:key=\"typeindex\">\n                                <p @click=\"getSelectType(type)\" class=\"type\">・{{type}}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"enquire-container\">\n                    <div class=\"enquire-title\">問い合わせ内容</div>\n                    <textarea class=\"enquire-text\" type=\"text\" v-model='form.text'></textarea>\n                </div>\n                <div @click=\"submit()\" class=\"btn-basegra-white-db-sq\">送信する</div>\n                <div class=\"error-container\">\n                    <div v-if='formError.occurred' :class=\"{'notification-red':formError.occurred}\">\n                        <i class=\"fas fa-exclamation-triangle\"></i>\n                        <div v-if='!form.name'>{{ formError.name}}</div>\n                        <div v-if='!form.mail'>{{ formError.mail }}</div>\n                        <div v-if='!form.type'>{{ formError.type}}</div>\n                        <div v-if='!form.text'>{{ formError.text }}</div>\n                        <div v-if='form.text.length < 20 &&form.text'>{{ formError.lessText }}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport {router} from \"/src/main.js\"\n\nexport default {\n    data(){\n        return{\n            description:'',\n            alert:false,\n            showType: false,\n            enquireType: [\n                '利用規約',\n                '個人情報の取り扱い',\n                'クイズ',\n                'コミュニティ',\n                '要望',\n                '仕事のお問い合わせ',\n                'その他'\n            ],\n            form:{\n                name:'',\n                mail:'',\n                type:'',\n                text:''\n            },\n            errorArray:[],\n            formError:{\n                occurred:false,\n                name:'名前を入力してください。',\n                mail:'メールアドレスを入力してください。',\n                wrongMail:'正しいアドレスを入力してください。',\n                type:'問い合わせタイプを入力してください。',\n                text:'問い合わせ内容を入力してください。',\n                lessText:'20字以上入力してください。'\n            }\n        }\n    },\n    methods:{\n        async createEnquire() {\n            try{\n                await axios({\n                    method: 'post',\n                    url: '/api/enquire/',                            \n                    data: {\n                        'user_name': this.form.name,\n                        'email': this.form.mail,\n                        'enquire_type': this.form.type,\n                        'enquire_content':this.form.text,\n                    },\n                })\n            } catch(e) {\n                console.log('response',e.response.status)\n                let logger = {\n                    message: this.errorMessage + \" enquire\" + \"couldn't create enquire\",\n                    path: window.location.pathname,\n                    actualErrorName: e.name,\n                    actualErrorMessage: e.message,\n                }\n                this.$store.commit('setLogger',logger)\n                this.$store.commit('setIsLoading', false)\n                router.push({ name: 'ConnectionError' })\n            }\n        },\n        showTypeHandle() {\n            console.log('clicked')\n            this.showType = !this.showType\n        },\n        getSelectType(val){\n            this.form.type = val\n        },\n        submit() {\n            this.errorArray = []\n            for(let i of Object.keys(this.form)) {\n                console.log(i)\n                if(i == 'text') {\n                    if(this.form[i].length < 20) {\n                        this.errorArray.push(this.formError[\"lessText\"])\n                        // this.formError.occurred = true\n                        // this.setTime()\n                    }\n                }\n                else if(i == 'mail') {\n                    if(!this.validEmail(this.form[i])) {\n                        this.errorArray.push(this.formError[\"wrongMail\"])\n                        // this.formError.occurred = true\n                        // this.setTime()\n                        // break\n                    }\n                }\n                else if(!this.form[i]) {\n                    this.errorArray.push(this.formError[i])\n                    // this.formError.occurred = true\n                    // this.setTime()\n                    // break\n                } else {\n                    this.formError.occurred = false\n                }\n            }\n            if(!this.formError.occurred){\n                this.createEnquire()\n                console.log('created')\n            } else {\n                this.formError.occurred = true\n                this.setTime()\n            }\n        },\n        validEmail: function (email) {\n            var re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n            return re.test(email);\n            },\n        formErrorFalse(){\n            this.formError.occurred = false\n        },\n        setTime(){\n            setTimeout(this.formErrorFalse,3000)\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"style/_variables.scss\";\n\n.enquire-wrapper{\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    position: relative;\n    .main-wapper{\n    }\n}\n.content-wrapper{\n    .title-white{\n        margin-bottom: 2rem;\n    }\n    .enquire-container{\n        position: relative;\n        display: flex;\n        justify-content: center;\n        width: 100%;\n        margin-top: 1rem;\n        .enquire-title{\n            position: absolute;\n            left: 0;\n            top: 0;\n            margin-left: 5%;\n            height: 20px;\n            color: white;\n            font-weight: bold;\n            border-bottom: solid $dark-blue;\n        }\n        .enquire-input{\n            width: 90%;\n            margin-top: 25px;\n            height: 40px;\n            padding: 0.3rem;\n            font-size: 1.2rem;\n            transition: .2s;\n        }\n        .enquire-input:focus{\n            border: solid $base-color;\n        }\n        .enquire-text{\n            width: 90%;\n            margin-top: 25px;\n            height: 300px;\n            padding: 1rem;\n            margin-bottom: 1rem;\n            resize: none;\n            font-size: 1.2rem;\n            transition: .2s;\n\n        }\n        .enquire-text:focus{\n                outline: none;\n                border: solid $base-color;\n        }\n        .enquire-type{\n            position: relative;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            width: 90%;\n            margin-top: 25px;\n            height: 40px;\n            padding: 0.3rem;\n            font-size: 1.2rem;\n            transition: .2s;\n            background: white;\n            .type-select{\n                position: absolute;\n                width: 100%;\n                min-height: 80px;\n                top: 35px;\n                background: rgba(252, 252, 252, 0.95);;\n                z-index: 1;\n                .type{\n                    padding: 0.5rem 0;\n                    transition: .5s;\n                }\n                .type:hover{\n                    display: block;\n                    background: $lite-gray;\n                }\n                // .type:last-child{\n                //     padding-bottom: 0;\n                // }\n            }\n        }\n        .fa-angle-down{\n            transition: .5s;\n        }\n        .lotate{\n            transform:rotate(180deg);\n        }\n    }\n    .btn-basegra-white-db-sq{\n        padding: 0.1rem 0.5rem;\n        font-weight: bold;\n        margin-bottom: 1rem;\n    }\n    .error-container{\n        position: absolute;\n        width: 100%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        left: 0;\n        .notification-red{\n            .fa-exclamation-triangle{\n                color: red;\n            }\n            div{\n                color: red;\n                margin-top: 0.5rem;\n                font-weight: bold;\n            }\n        }\n    }\n}\n</style>"]},"metadata":{},"sourceType":"module"}