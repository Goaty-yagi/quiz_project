{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ossan/git-clone/quiz_project/vue_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/ossan/git-clone/quiz_project/vue_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { mapGetters, mapActions } from 'vuex';\nimport Progress from '@/components/signin/Progress.vue';\nimport Sent from '@/components/signin/Sent.vue';\nimport ID from '@/components/signin/ID.vue';\nimport Password from '@/components/signin/Password.vue';\nimport RegisterConfirm from '@/components/signin/RegisterConfirm.vue';\nimport Registered from '@/components/signin/Registered.vue';\nimport Edit from '@/components/signin/Edit.vue';\nimport country from '../assets/country.json';\nexport default {\n  components: {\n    Progress: Progress,\n    Sent: Sent,\n    ID: ID,\n    Password: Password,\n    RegisterConfirm: RegisterConfirm,\n    Registered: Registered,\n    Edit: Edit\n  },\n  data: function data() {\n    return {\n      step: 0,\n      username: '',\n      email: '',\n      email2: '',\n      country: '',\n      viewableCountry: '',\n      nameError: null,\n      mailError: null,\n      mailInUseError: null,\n      showSent: false,\n      showProgress: true,\n      showButton: true,\n      showRegiConf: false,\n      showEdit: false,\n      showPassword: false,\n      slideIn: true,\n      slideOut: false,\n      showSellect: false,\n      countryData: country.country,\n      filled: false\n    };\n  },\n  updated: function updated() {\n    this.showButtonHandler();\n    console.log(this.$store.state.signup.username); // this.getClass()\n  },\n  created: function created() {// let a = window.addEventListener(\"beforeunload\",this.confirmFun());\n    // console.log('created',a)\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    window.addEventListener('beforeunload', function () {\n      _this.handleBeforeUnload();\n    }); // window.onbeforeunload = this.handleBeforeUnload\n    // window.onbeforeunload = function () {\n    // return '保存されていないデータは破棄されます。'\n    // }\n\n    window.addEventListener(\"popstate\", this.handleBeforeUnload); // window.onbeforeunload = function(){\n    //     return \"本当に離れますか？\";\n    //     }\n    // window.addEventListener(\"pagehide\", event => {\n    //     console.log('unko',event.persisted)\n    //     if (event.persisted) {\n    //         console.log('true',event.persisted)\n    //         return 'このページは破棄されないので、後で再利用することができます'\n    //     }\n    // }),\n\n    this.$store.commit('handleOnSigningup'); // console.log('mounted',this.country)\n\n    this.step = this.$store.state.step;\n  },\n  beforeUnmount: function beforeUnmount() {\n    window.onbeforeunload = null;\n    window.removeEventListener(\"popstate\", function () {\n      console.log('back');\n    }), this.$store.commit('handleOnSigningup');\n    this.$store.commit('fixedScrollFalse');\n  },\n  watch: {\n    showButton: function showButton(v) {\n      if (v == false) {\n        this.$refs.bform.classList.add('button-hover'), this.filled = true;\n      } else {\n        this.$refs.bform.classList.remove('button-hover'), this.filled = false;\n      }\n    },\n    nameError: function nameError(v) {\n      if (v != '') {\n        this.$refs.formName.classList.add('form-error'), this.filled = true;\n      } else {\n        this.$refs.formName.classList.remove('form-error'), this.filled = false;\n      }\n    },\n    mailError: function mailError(v) {\n      if (v != '') {\n        this.$refs.formMail.classList.add('form-error'), this.filled = true;\n      } else {\n        this.$refs.formName.classList.remove('form-error'), this.filled = false;\n      }\n    },\n    mailInUseError: function mailInUseError(v) {\n      if (v != '') {\n        this.$refs.formMail.classList.add('form-error'), this.filled = true;\n      } else {\n        this.$refs.formName.classList.remove('form-error'), this.filled = false;\n      }\n    }\n  },\n  computed: mapGetters(['fixedScroll']),\n  methods: {\n    test: function test() {\n      console.log('test');\n    },\n    submitForm: function submitForm() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // validate email\n                // console.log('clicked1')\n                _this2.nameError = _this2.username.length < 21 ? '' : '@name must be less than 20 chars';\n                _this2.mailError = _this2.email == _this2.email2 ? '' : '@addresses are not the same';\n                console.log(_this2.nameError);\n\n                if (!(_this2.nameError == '' && _this2.mailError == '')) {\n                  _context.next = 10;\n                  break;\n                }\n\n                _context.next = 6;\n                return _this2.$store.dispatch('checkEmail', _this2.email);\n\n              case 6:\n                console.log(_this2.$store.state.signup.checkedEmail);\n                _this2.mailInUseError = _this2.$store.state.signup.checkedEmail ? '' : '@address is already in use';\n                console.log(_this2.mailInUseError);\n\n                if (_this2.$store.state.signup.checkedEmail == true) {\n                  // this.showSentHandler()\n                  _this2.handleSlide();\n\n                  _this2.showPasswordTrue();\n\n                  _this2.showProgressHandler();\n\n                  _this2.$store.commit('addStep');\n\n                  _this2.$store.commit('getUsername', _this2.username);\n\n                  _this2.$store.commit('getEmail', _this2.email);\n\n                  _this2.$store.commit('getEmail2', _this2.email2);\n\n                  _this2.$store.commit('getCountry', _this2.country);\n                }\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    showSentHandler: function showSentHandler() {\n      this.showSent = !this.showSent;\n    },\n    showProgressHandler: function showProgressHandler() {\n      this.showProgress = !this.showProgress;\n    },\n    showRegiConfHandler: function showRegiConfHandler() {\n      this.showRegiConf = !this.showRegiConf;\n    },\n    showEditHandler: function showEditHandler() {\n      this.showEdit = !this.showEdit;\n    },\n    progressOff: function progressOff() {\n      this.showProgress = false;\n    },\n    showButtonHandler: function showButtonHandler() {\n      if (this.username != '' && this.email != '' && this.email2 != '' && this.country != '') {\n        this.showButton = false;\n      } else {\n        this.showButton = true;\n      }\n    },\n    getFilledItems: function getFilledItems(item) {\n      if (item == 'Username') {\n        if (this.$store.signup.state.username != '') {\n          this.username = this.$store.signup.state.username;\n        }\n      }\n\n      if (item == 'E-mail') {\n        if (this.$store.signup.state.email != '') {\n          this.email = this.$store.signup.state.email;\n        }\n      }\n\n      if (item == 'Confirm') {\n        if (this.$store.signup.state.email2 != '') {\n          this.email2 = this.$store.signup.state.email2;\n        }\n      }\n\n      if (item == 'Country') {\n        if (this.$store.signup.state.country != '') {\n          this.country = this.$store.signup.state.country;\n        }\n      }\n    },\n    showPasswordTrue: function showPasswordTrue() {\n      this.showPassword = true;\n    },\n    showPasswordFalse: function showPasswordFalse() {\n      this.showPassword = false;\n    },\n    handleSlide: function handleSlide() {\n      this.slideOut = !this.slideOut;\n      this.slideIn = !this.slideIn; // var slide = document.getElementById('slide')\n      // slide.setAttribute('style','display:none')\n      // console.log('slide',slide)\n    },\n    googleLogin: function googleLogin() {\n      this.$store.dispatch('googleLogin');\n    },\n    showSelectionTrue: function showSelectionTrue() {\n      this.showSellect = true; // this.$store.commit('showModalTrue')\n\n      this.$store.commit('fixedScrollTrue');\n    },\n    showSelectionFalse: function showSelectionFalse() {\n      this.showSellect = false; // this.$store.commit('showModalFalse')\n\n      this.$store.commit('fixedScrollFalse');\n    },\n    addCountry: function addCountry(country) {\n      this.country = this.convertCountryToTwoCode(country);\n      this.viewableCountry = country;\n      console.log('check', this.viewableCountry, this.country);\n      this.showSelectionFalse();\n    },\n    convertCountryToTwoCode: function convertCountryToTwoCode(country) {\n      console.log('in', this.countryData.length);\n\n      for (var i = 0; i < this.countryData.length; i++) {\n        console.log('convert', this.countryData[i][i].J_name, country);\n\n        if (this.countryData[i][i].J_name == country) {\n          return this.countryData[i][i].two_code;\n        }\n      }\n    },\n    setCountryForEdit: function setCountryForEdit(country) {\n      this.viewableCountry = country;\n    },\n    handleBeforeUnload: function handleBeforeUnload(e) {\n      e.preventDefault();\n      alert('unko'); // console.log('konnnichiha',e)\n      // const message =\n      //     \"Are you sure you want to leave? All provided data will be lost.\";\n      // e.returnValue = message;\n      // return message;\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["mapGetters","mapActions","Progress","Sent","ID","Password","RegisterConfirm","Registered","Edit","country","components","data","step","username","email","email2","viewableCountry","nameError","mailError","mailInUseError","showSent","showProgress","showButton","showRegiConf","showEdit","showPassword","slideIn","slideOut","showSellect","countryData","filled","updated","showButtonHandler","console","log","$store","state","signup","created","mounted","window","addEventListener","handleBeforeUnload","commit","beforeUnmount","onbeforeunload","removeEventListener","watch","v","$refs","bform","classList","add","remove","formName","formMail","computed","methods","test","submitForm","length","dispatch","checkedEmail","handleSlide","showPasswordTrue","showProgressHandler","showSentHandler","showRegiConfHandler","showEditHandler","progressOff","getFilledItems","item","showPasswordFalse","googleLogin","showSelectionTrue","showSelectionFalse","addCountry","convertCountryToTwoCode","i","J_name","two_code","setCountryForEdit","e","preventDefault","alert"],"sourceRoot":"","sources":["/Users/ossan/git-clone/quiz_project/vue_front/src/views/Signup.vue"],"sourcesContent":["<template>\n    <div class=\"signin-wrapper\" :class=\"{'scroll-fixed':fixedScroll}\">\n        <div class=\"signin-container\">\n            <div class=\"flex-wrapper\">\n                <p class='title-white'>ユーザー登録</p>\n                <Progress\n                v-if='showProgress'\n                />\n            </div>\n            <div v-if=\"showSellect\" class=\"country-select\">\n                <div class='country-relative'>\n                    <div class=\"close-container\">\n                        <div @click=\"showSelectionFalse()\" class=\"close\">\n                            <i class=\"fas fa-times\"></i>\n                        </div>\n                    </div>\n                    <p class='country-title'>出身国を選んでください</p>\n                    <p v-if=\"viewableCountry\" class=\"addedCountry\">{{ viewableCountry }}</p>\n                    <div\n                    class='each-country'\n                    @click=\"addCountry(countryData[num-1][num-1].J_name)\"\n                    v-for=\"(num,countryindex) of countryData.length\"\n                    v-bind:key=\"countryindex\">\n                        <p v-if=\"country!=countryData[num-1][num-1].J_name\" >{{countryData[num-1][num-1].J_name}}</p>\n                    </div>\n                </div>\n            </div>\n            <div :class=\"{'slide-in':slideIn,'slide-out':slideOut}\" id=\"slide\">\n                <form v-if='showProgress' @submit.prevent='submitForm' class=\"field-wrapper\">\n                    <div class=\"field\">\n                        <div class=\"input-box\" ref='formName'>\n                            <i class=\"fas fa-robot\" id='in-font'><input required class=\"text-box\" type='text' v-model='username' id='Username' placeholder=\"Username\"></i>\n                        </div>       \n                    </div>\n                    <div class=\"field\">\n                        <div class=\"input-box\" ref='formMail'>\n                            <i class=\"far fa-envelope\" id='in-font'><input required class=\"text-box\" type='email' v-model='email' id='E-mail' placeholder=\"E-mail\"></i>\n                        </div>         \n                    </div>\n                    <div class=\"field\">\n                        <div class=\"input-box\">\n                            <i class=\"far fa-envelope\" id='in-font'><input required class=\"text-box\" type='email' v-model='email2' id='Confirm' placeholder=\"Confirm\"></i>\n                        </div>         \n                    </div>\n                    <div class=\"field\">\n                        <div @click=\"showSelectionTrue()\" class=\"input-box\">\n                            <input required class=\"text-box select-dammy-box\" type='text' :focus='false' v-model='viewableCountry' placeholder=\"Country\">\n                            <i class=\"fas fa-globe\" id='in-font'>                            \n                            </i>\n                            <!-- <p v-if='!country' id='infont-text'>Country</p> -->\n                            <p v-if='viewableCountry' id='infont-text'>{{ viewableCountry }}</p>\n                            <p v-if='!country' class='down'>⌵</p>\n                        </div>         \n                    </div>\n                    <div v-if='mailError||nameError||mailInUseError' class='error-form'>\n                        <i class=\"fas fa-exclamation-triangle\"></i>\n                        <div v-if='mailError'>{{ mailError}}</div>\n                        <div v-if='nameError'>{{ nameError }}</div>\n                        <div v-if='mailInUseError'>{{ mailInUseError }}</div>\n                    </div>\n                    <div>\n                        <button class='fbottun' ref='bform' id=''>次へ</button>\n                    </div>\n                    <div class=\"signup-footer\">\n                        <p>アカウントをお持ちですか</p>\n                        <router-link :to=\"{ name: 'Login'}\" class=\"to-login\">ログイン画面へ移動=></router-link>\n                        <p>Googleアカウントでログイン</p>\n                        <a class=\"logo-container\">\n                            <img class=\"google\" @click=\"googleLogin()\" src=\"@/assets/btn_google.png\">\n                        </a>\n                    </div>\n                </form>\n            </div>\n            <transition name=\"slide-in\">\n                <Password\n                class=\"components\"\n                v-if='$store.state.step==2&&showPassword&&!showEdit'\n                @handle='showProgressHandler'\n                @confHandle='showRegiConfHandler'\n                />\n            </transition>\n            <transition name=\"notice\">\n                <RegisterConfirm\n                class=\"registaer-confirm\"\n                v-if='$store.state.step==2&&showRegiConf&&!showEdit&&!showSent'\n                :viewableCountry=\"viewableCountry\"\n                @handle='showProgressHandler'\n                @edithandle='showEditHandler'\n                @sentHandle='showSentHandler'\n                @showPasswordFalse='showPasswordFalse'\n                />\n            </transition>\n            <transition name=\"notice\">\n            <Sent\n                v-if='showSent&&$store.state.step==3'\n                @handle='showProgressHandler'\n                @sentHandle='showSentHandler'\n                />\n            </transition>\n            <transition name=\"slide-in\">\n                <Edit\n                    v-if='showEdit&&!showPassword'\n                    @handle='showProgressHandler'\n                    @confHandle='showRegiConfHandler'\n                    @edithandle='showEditHandler'\n                    @setCountryForEdit=\"setCountryForEdit\"\n                    :showProgress='showProgress'\n                    :viewableCountry='viewableCountry'\n                    :countryData='countryData'/>\n            </transition>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {mapGetters,mapActions} from 'vuex'\nimport Progress from '@/components/signin/Progress.vue'\nimport Sent from '@/components/signin/Sent.vue'\nimport ID from '@/components/signin/ID.vue'\nimport Password from '@/components/signin/Password.vue'\nimport RegisterConfirm from '@/components/signin/RegisterConfirm.vue'\nimport Registered from '@/components/signin/Registered.vue'\nimport Edit from '@/components/signin/Edit.vue'\nimport country from '../assets/country.json';\n\n\nexport default {\n    components:{\n        Progress,\n        Sent,\n        ID,\n        Password,\n        RegisterConfirm,\n        Registered,\n        Edit\n    },\n    data(){\n        return{\n            step:0,\n            username:'',\n            email:'',\n            email2:'',\n            country:'',\n            viewableCountry:'',\n            nameError:null,\n            mailError:null,\n            mailInUseError:null,\n            showSent: false,\n            showProgress:true,\n            showButton:true,\n            showRegiConf:false,\n            showEdit:false,\n            showPassword: false,\n            slideIn:true,\n            slideOut:false,\n            showSellect:false,\n            countryData:country.country,       \n            filled: false,  \n        }\n    },\n    updated(){\n        this.showButtonHandler()\n        console.log(this.$store.state.signup.username)\n        // this.getClass()\n    },\n    created(){\n        // let a = window.addEventListener(\"beforeunload\",this.confirmFun());\n        // console.log('created',a)\n    },\n    mounted(){\n        window.addEventListener('beforeunload', () => {\n      this.handleBeforeUnload()\n    })\n        // window.onbeforeunload = this.handleBeforeUnload\n        // window.onbeforeunload = function () {\n        // return '保存されていないデータは破棄されます。'\n        // }\n        window.addEventListener(\"popstate\", this.handleBeforeUnload)\n        // window.onbeforeunload = function(){\n        //     return \"本当に離れますか？\";\n        //     }\n        // window.addEventListener(\"pagehide\", event => {\n        //     console.log('unko',event.persisted)\n        //     if (event.persisted) {\n        //         console.log('true',event.persisted)\n        //         return 'このページは破棄されないので、後で再利用することができます'\n        //     }\n        // }),\n        this.$store.commit('handleOnSigningup')\n        // console.log('mounted',this.country)\n        this.step = this.$store.state.step\n    },\n    beforeUnmount(){\n        window.onbeforeunload = null\n        window.removeEventListener(\"popstate\", function() {\n            console.log('back')\n        }),\n        this.$store.commit('handleOnSigningup')\n        this.$store.commit('fixedScrollFalse')\n    },\n    watch:{\n        showButton:function(v) {if (v == false) { this.$refs.bform.classList.add('button-hover'),this.filled=true}\n        else{this.$refs.bform.classList.remove('button-hover'),this.filled=false}},\n        nameError:function(v) {if (v != '') { this.$refs.formName.classList.add('form-error'),this.filled=true}\n        else{this.$refs.formName.classList.remove('form-error'),this.filled=false}},\n        mailError:function(v) {if (v != '') { this.$refs.formMail.classList.add('form-error'),this.filled=true}\n        else{this.$refs.formName.classList.remove('form-error'),this.filled=false}},\n        mailInUseError:function(v) {if (v != '') { this.$refs.formMail.classList.add('form-error'),this.filled=true}\n        else{this.$refs.formName.classList.remove('form-error'),this.filled=false}},\n    },\n    computed: mapGetters(['fixedScroll']),\n    methods:{\n        test () {\n      console.log('test')\n    },\n        async submitForm(){\n            // validate email\n            // console.log('clicked1')\n            this.nameError = this.username.length < 21 ?\n            '' : '@name must be less than 20 chars'\n            this.mailError = this.email == this.email2 ?\n            '' : '@addresses are not the same'\n            console.log(this.nameError)\n            if (this.nameError == ''&& this.mailError ==''){\n                await this.$store.dispatch('checkEmail',this.email)\n                console.log(this.$store.state.signup.checkedEmail)\n                this.mailInUseError = this.$store.state.signup.checkedEmail ?\n                '' : '@address is already in use'\n                console.log(this.mailInUseError)\n                if (this.$store.state.signup.checkedEmail == true){\n                // this.showSentHandler()\n                this.handleSlide()\n                this.showPasswordTrue()\n                this.showProgressHandler()\n                this.$store.commit('addStep')\n                this.$store.commit('getUsername',this.username)\n                this.$store.commit('getEmail',this.email)\n                this.$store.commit('getEmail2',this.email2)\n                this.$store.commit('getCountry',this.country)\n                }                \n            }\n        },\n        showSentHandler(){\n            this.showSent = !this.showSent\n        },\n        showProgressHandler(){\n            this.showProgress = !this.showProgress\n        },\n        showRegiConfHandler(){\n            this.showRegiConf = !this.showRegiConf\n        },\n        showEditHandler(){\n            this.showEdit = !this.showEdit\n        },\n        progressOff(){\n            this.showProgress = false\n        },\n        showButtonHandler(){\n            if(this.username!=''&&\n                this.email!=''&&\n                this.email2!=''&&\n                this.country!=''){\n                    this.showButton = false\n            }\n            else{\n                this.showButton = true\n            }\n        },\n        getFilledItems(item){\n            if(item == 'Username'){\n                if(this.$store.signup.state.username !=''){\n                    this.username = this.$store.signup.state.username\n                }\n            }\n            if(item == 'E-mail'){\n                if(this.$store.signup.state.email !=''){\n                    this.email = this.$store.signup.state.email\n                }\n            }\n            if(item == 'Confirm'){\n                if(this.$store.signup.state.email2 !=''){\n                    this.email2 = this.$store.signup.state.email2\n                }\n            }\n            if(item == 'Country'){\n                if(this.$store.signup.state.country !=''){\n                    this.country = this.$store.signup.state.country\n                }\n            }\n        },\n        showPasswordTrue(){\n            this.showPassword = true\n        },\n        showPasswordFalse(){\n            this.showPassword = false\n        },\n        handleSlide(){\n            this.slideOut = !this.slideOut\n            this.slideIn = !this.slideIn\n            // var slide = document.getElementById('slide')\n            // slide.setAttribute('style','display:none')\n            // console.log('slide',slide)\n        },\n        googleLogin(){\n            this.$store.dispatch('googleLogin')\n        },\n        showSelectionTrue(){\n            this.showSellect = true\n            // this.$store.commit('showModalTrue')\n            this.$store.commit('fixedScrollTrue')\n        },\n        showSelectionFalse(){\n            this.showSellect = false\n            // this.$store.commit('showModalFalse')\n            this.$store.commit('fixedScrollFalse')\n        },\n        addCountry(country){\n            this.country = this.convertCountryToTwoCode(country)\n            this.viewableCountry = country\n            console.log('check',this.viewableCountry,this.country)\n            this.showSelectionFalse()\n        },\n        convertCountryToTwoCode(country){\n            console.log('in', this.countryData.length)\n            for(let i = 0; i<this.countryData.length; i++){\n                console.log('convert',this.countryData[i][i].J_name,country)\n                if(this.countryData[i][i].J_name == country){\n                    return this.countryData[i][i].two_code\n                }\n            }\n        },\n        setCountryForEdit(country){\n            this.viewableCountry = country\n        },\n        handleBeforeUnload(e){\n            e.preventDefault()\n            alert('unko')\n            // console.log('konnnichiha',e)\n            // const message =\n            //     \"Are you sure you want to leave? All provided data will be lost.\";\n            // e.returnValue = message;\n            // return message;\n        }\n    }\n}\n</script>\n\n<style scoped lang='scss'>\n@import \"style/_variables.scss\";\n    .signin-wrapper{\n        width:100%;\n        height: 100vh;\n        padding-top:5rem;\n        .signin-container{\n            width:100%;\n            height: 100vh;\n            position: relative;\n            flex-direction: column;\n            display: flex;\n            align-items: center;\n            .country-select{\n                position: absolute;\n                width: 85%;\n                max-width: 400px;\n                height: 75%;\n                max-height: 500px;\n                border: solid grey;\n                border-top: 0.3rem solid grey;\n                border-bottom: 0.3rem solid grey;\n                top: 2rem;\n                margin-top: 0.1rem;\n                margin-bottom: 0.5rem;\n                padding-top: 1rem;\n                padding-bottom: 1rem;\n                min-height: 5rem;\n                background: $back-tr-white;\n                transition: .5s;\n                z-index: 1;\n                overflow: scroll;\n                .country-relative{\n                    position: relative;\n                    .close-container{\n                        margin-top: -1rem;\n                        .close{\n                            // position: sticky;\n                        }\n                    }\n                    .country-title{\n                        margin-top: 1.5rem;\n                        padding-bottom: 1rem;\n                    }\n                    .addedCountry{\n                            // background: red;\n                            margin-bottom: 0.5rem;\n                            font-weight: bold;\n                            background: rgba(162, 161, 161, 0.3);\n                        }\n                    .each-country{\n                        font-size: 0.8rem;\n                        margin-top: 0.1rem;\n                        margin-bottom: 0.1rem;\n                        transition: .5s;\n                    }\n                    .each-country:hover{\n                        background: $lite-gray;\n                        \n                    }\n                }\n            }\n            .title-white{\n                margin-bottom: 1rem;\n            }\n        }\n    }\n    .signin-text{\n        color:white;\n        font-size:2rem;\n       \n    }\n    .field-wrapper{\n        // display: flex;\n        // flex-direction: column;\n        // justify-content: center;\n        margin-top:3rem;\n    }\n    .field{\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n    .label{\n        color:white;\n        width: 2.7rem;\n        overflow-wrap: break-word;\n        margin-right:1%;\n        line-height:1rem\n    }.label:not(:last-child) {\n        margin-bottom: initial;\n}\n    input[type=\"text\"]:focus {\n        outline: none;\n        }\n    input[type=\"email\"]:focus {\n        outline: none;\n    }\n    select:focus {\n        outline: none;\n        }\n    .input-box:focus-within{\n        border: solid $base-color;\n        \n        }\n    .input-box{\n        border: 0.12rem solid $base-color;\n        border-radius: 100vh;\n        background: $back-white;\n        width: 17rem;\n        height: 3rem;\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n        position: relative;\n        .down{\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            -webkit-transform: translate(-50%, -50%);\n            -ms-transform: translate(-50%, -50%);\n            color:rgb(75, 75, 75);\n            \n        }\n    }\n    #in-font{\n        margin-left:0.5rem;\n        color:rgb(158, 158, 158); \n        transition:0.3s;\n        position:relative;\n    }\n    #infont-text {\n        font-size: 0.8rem;\n        margin-left:0.5rem;\n        color:rgb(75, 75, 75);\n        font-weight: 450;\n        transition:0.3s;\n        font-style: italic;\n    }\n    ::placeholder {\n        font-style: italic;\n        color:rgb(75, 75, 75);\n        margin-left:0.5rem;\n        font-weight: 400;\n        transition:0.3s;\n    }\n    #in-font:focus-within{\n        color:rgb(92, 92, 92);\n\n    }\n    .text-box{\n        width: 14rem;\n        border:none;\n        background: $back-white;\n        margin-left:0.5rem;\n        position:absolute;\n        left:1rem;\n    }\n    .select-box{\n        width: 82%;\n        border:none;\n        background: $back-white;\n        margin-left:0.5rem;\n    }\n    .check-box-text{\n        color:white;\n        margin-left:1rem;\n    }\n.components{\n    display: absolute;\n}\n#slide{\n    display: absolute;\n}\n// .slide-in{\n// \ttext-align: center;\n// \topacity: 0;\n// \tanimation: slide-in-anim 1.5s ease-out forwards;\n// }\n.slide-out{\n    text-align: center;\n\topacity: 1;\n\tanimation: slide-out-anim 1.5s ease-out forwards;\n}\n.signup-footer{\n    p{\n        color: white;\n        margin-top: 0.5rem;\n        font-weight: bold;\n    }\n    .to-login:hover{\n        background: rgba(252, 252, 252, 0.3);\n        font-weight: bold;\n    }\n    .to-login{\n        display: inline-block;\n        color: $lite-gray;\n        padding: 0.2rem 0.5rem;\n        margin: 0.4rem;\n        border: solid $base-color;\n        transition: .5s;\n    }\n    .logo-container{\n        .google{\n            width: 70%;        \n        }\n    }\n}\n.select-dammy-box{\n    caret-color: transparent;\n    margin-left: 1rem;\n}\n// @keyframes slide-in-anim {\n// \t0% {\n// \t\topacity: 0;\n//         transform: translateX(-20%);\n// \t}\n// \t// 60% {\n// \t// \ttransform: translateX(-10%);\n// \t// }\n// \t// 75% {\n// \t// \ttransform: translateX(2%);\n// \t// }\n// \t100% {\n// \t\topacity: 1;\n// \t\ttransform: translateX(0);\n// \t}\n// }\n@keyframes slide-out-anim {\n\t0% {\n\t\topacity: 1;\n        transform: translateX(0);\n\t}\n\t// 60% {\n\t// \ttransform: translateX(-10%);\n\t// }\n\t// 75% {\n\t// \ttransform: translateX(2%);\n\t// }\n\t100% {\n\t\topacity: 0;\n\t\ttransform: translateX(-60%);\n        display: none;\n        \n\t}\n}\n.registaer-confirm{\n    z-index: 1;\n}\n.slide-in-enter-active {\n  animation: slide-in  ease-out 1.5s;\n}\n.slide-in-leave-active {\n  animation: slide-out ease-out 1.5s;\n}\n@keyframes slide-in {\n  0% {\n\t\topacity: 0;\n        transform: translateX(5%);\n\t}\n\t// 60% {\n\t// \ttransform: translateX(-10%);\n\t// }\n\t// 75% {\n\t// \ttransform: translateX(2%);\n\t// }\n\t100% {\n\t\topacity: 1;\n\t\ttransform: translateX(0);\n\t}\n}\n@keyframes slide-out {\n  0% {\n\t\topacity: 1;\n        transform: translateX(0);\n\t}\n\t// 60% {\n\t// \ttransform: translateX(-10%);\n\t// }\n\t// 75% {\n\t// \ttransform: translateX(2%);\n\t// }\n\t100% {\n\t\topacity: 0;\n\t\ttransform: translateX(-10%);\n\t}\n}\n@media(max-width: 629px){\n    .signin-wrapper{\n        padding-top:1rem;\n        \n    }\n}\n</style>"]},"metadata":{},"sourceType":"module"}